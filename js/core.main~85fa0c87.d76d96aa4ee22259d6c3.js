(self.webpackChunk=self.webpackChunk||[]).push([[982],{16846:(e,t,n)=>{"use strict";n.d(t,{Z:()=>k});var r=n(32735),a=n(13799),o=n(8475),i=n(20374),c=n(78508),l=n(60216),s=n.n(l),u=n(75672),_=n(58468),d=function(e){var t=e.history,n=e.currency,a=e.setVerificationCode,c=e.hasAnyRealAccount,l=e.openRealAccountSignup,s=e.toggleAccountSignupModal,u=e.toggleResetPasswordModal,d=window.location.search,m=new URLSearchParams(d),f=!1,p=r.useContext(o.PlatformContext).is_dashboard;switch(a(m.get("code"),m.get("action")),m.get("action")){case"signup":p&&(t.push({pathname:o.routes.dashboard,search:d}),f=!0),s(!0);break;case"reset_password":u(!0);break;case"payment_withdraw":t.push(o.routes.cashier_withdrawal),f=!0;break;case"payment_agent_withdraw":t.push(o.routes.cashier_pa),f=!0;break;case"add_account":_.WS.wait("get_account_status").then((function(){return n?c()?l("manage"):l():l("set_currency")}));var g=m.get("ext_platform_url");g&&(t.push("".concat(o.routes.root,"?ext_platform_url=").concat(g)),f=!0);break;case"verification":sessionStorage.setItem("redirect_url",o.routes.cashier_p2p_verification),window.location.href=(0,o.loginUrl)({language:(0,i.getLanguage)()});break;case"mt5_password_reset":var h;localStorage.setItem("mt5_reset_password_code",m.get("code"));var y=null===(h=localStorage.getItem("mt5_reset_password_intent"))||void 0===h?void 0:h.includes("demo");t.push("".concat(o.routes.mt5,"#").concat(y?"demo":"real","#reset-password")),f=!0}return f||t.push({pathname:o.routes.root,search:d}),null};d.propTypes={getServerTime:s().object,history:s().object,setVerificationCode:s().func,toggleAccountSignupModal:s().func,toggleResetPasswordModal:s().func};const m=(0,a.withRouter)((0,u.$j)((function(e){var t=e.client,n=e.ui;return{currency:t.currency,setVerificationCode:t.setVerificationCode,fetchResidenceList:t.fetchResidenceList,hasAnyRealAccount:t.hasAnyRealAccount,openRealAccountSignup:n.openRealAccountSignup,toggleAccountSignupModal:n.toggleAccountSignupModal,toggleResetPasswordModal:n.toggleResetPasswordModal}}))(d));var f=n(52918);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v,E=r.lazy((function(){return Promise.resolve().then(n.bind(n,63986))})),w=r.lazy((function(){var e=document.querySelector("head"),t=document.createElement("link");return t.href=(0,o.getUrlBase)("/css/trader.main.css"),t.rel="stylesheet",t.type="text/css",e.appendChild(t),Promise.all([n.e(605),n.e(930),n.e(447),n.e(245)]).then(n.t.bind(n,55711,23))})),S=r.lazy((function(){var e=document.querySelector("head"),t=document.createElement("link");return t.href=(0,o.getUrlBase)("/account/css/account.css"),t.rel="stylesheet",t.type="text/css",e.appendChild(t),n.e(809).then(n.t.bind(n,98148,23))})),A=r.lazy((function(){var e=document.querySelector("head"),t=document.createElement("link");return t.href=(0,o.getUrlBase)("/css/cashier.css"),t.rel="stylesheet",t.type="text/css",e.appendChild(t),n.e(856).then(n.t.bind(n,86184,23))})),z=r.lazy((function(){return Promise.all([n.e(605),n.e(172)]).then(n.t.bind(n,53928,23))})),O=r.lazy((function(){return n.e(966).then(n.bind(n,95135))})),C=(0,c.m)((function(){return n.e(880).then(n.bind(n,23456))})),N=function(e){var t=e.is_deriv_crypto,n=e.is_dashboard;return[{path:o.routes.index,component:a.Redirect,getTitle:function(){return""},to:o.routes.root},{path:o.routes.endpoint,component:f.Z,getTitle:function(){return"Endpoint"}},{path:o.routes.redirect,component:m,getTitle:function(){return(0,i.localize)("Redirect")}},{path:o.routes.complaints_policy,component:C(),getTitle:function(){return(0,i.localize)("Complaints policy")},icon_component:"IcComplaintsPolicy",is_authenticated:!0}].concat(y(function(e){var t=e.is_deriv_crypto,n=e.is_dashboard;return[{path:o.routes.bot,component:z,getTitle:function(){return(0,i.localize)("Bot")}},{path:o.routes.account_deactivated,component:S,getTitle:function(){return(0,i.localize)("Account deactivated")}},{path:o.routes.account,component:S,getTitle:function(){return(0,i.localize)("Account Settings")},icon_component:"IcUserOutline",is_authenticated:!0,routes:[{getTitle:function(){return(0,i.localize)("Profile")},icon:"IcUserOutline",subroutes:[{path:o.routes.personal_details,component:S,getTitle:function(){return(0,i.localize)("Personal details")},default:!0}].concat(y(t?[]:[{path:o.routes.financial_assessment,component:S,getTitle:function(){return(0,i.localize)("Financial assessment")}}]))}].concat(y(t?[]:[{getTitle:function(){return(0,i.localize)("Verification")},icon:"IcVerification",subroutes:[{path:o.routes.proof_of_identity,component:S,getTitle:function(){return(0,i.localize)("Proof of identity")}},{path:o.routes.proof_of_address,component:S,getTitle:function(){return(0,i.localize)("Proof of address")}}]}]),[{getTitle:function(){return(0,i.localize)("Security and safety")},icon:"IcSecurity",subroutes:[{path:o.routes.deriv_password,component:S,getTitle:function(){return(0,i.localize)("Deriv password")}},{path:o.routes.self_exclusion,component:S,getTitle:function(){return(0,i.localize)("Self exclusion")}},{path:o.routes.account_limits,component:S,getTitle:function(){return(0,i.localize)("Account limits")}},{path:o.routes.login_history,component:S,getTitle:function(){return(0,i.localize)("Login history")}},{path:o.routes.api_token,component:S,getTitle:function(){return(0,i.localize)("API token")}},{path:o.routes.connected_apps,component:S,getTitle:function(){return(0,i.localize)("Connected apps")}},{path:o.routes.two_factor_authentication,component:S,getTitle:function(){return(0,i.localize)("Two-factor authentication")}},{path:o.routes.deactivate_account,component:S,getTitle:function(){return(0,i.localize)("Deactivate account")}}]}])},{path:o.routes.cashier,component:A,is_modal:!0,is_authenticated:!0,getTitle:function(){return(0,i.localize)("Cashier")},icon_component:"IcCashier",routes:[{path:o.routes.cashier_deposit,component:A,getTitle:function(){return(0,i.localize)("Deposit")},icon_component:"IcWalletAdd",default:!0},{path:o.routes.cashier_withdrawal,component:A,getTitle:function(){return(0,i.localize)("Withdrawal")},icon_component:"IcWalletMinus"}].concat(y(t?[]:[{path:o.routes.cashier_pa,component:A,getTitle:function(){return(0,i.localize)("Payment agents")},icon_component:"IcPaymentAgent"}]),[{path:o.routes.cashier_acc_transfer,component:A,getTitle:function(){return(0,i.localize)("Transfer")},icon_component:"IcAccountTransfer"}],y(t?[]:[{path:o.routes.cashier_pa_transfer,component:A,getTitle:function(){return(0,i.localize)("Transfer to client")},icon_component:"IcAccountTransfer"},{path:o.routes.cashier_p2p,component:A,getTitle:function(){return(0,i.localize)("DP2P")},icon_component:"IcDp2p"},{path:o.routes.cashier_p2p_verification,component:A,getTitle:function(){return(0,i.localize)("DP2P")},icon_component:"IcDp2p",is_invisible:!0}]),[{id:"gtm-onramp-tab",path:o.routes.cashier_onramp,component:A,getTitle:function(){return(0,i.localize)("Fiat onramp")},icon_component:"IcCashierOnRamp"}])},g({},n?{path:o.routes.dashboard,component:O,getTitle:function(){return(0,i.localize)("Dashboard")},routes:[{path:o.routes.explore,component:O,getTitle:function(){return(0,i.localize)("Explore")}},{path:o.routes.about_us,component:O,getTitle:function(){return(0,i.localize)("About Us")}},{path:o.routes.resources,component:O,getTitle:function(){return(0,i.localize)("Resources")}},{path:o.routes.platform_dmt5_synthetic,component:O,getTitle:function(){return(0,i.localize)("DMT5 Synthetic")}}]}:{path:o.routes.root,component:w,getTitle:function(){return(0,i.localize)("Trader")},routes:[{path:o.routes.mt5,component:w,getTitle:function(){return(0,i.localize)("MT5")},is_authenticated:!1},{path:o.routes.reports,component:w,getTitle:function(){return(0,i.localize)("Reports")},icon_component:"IcReports",is_authenticated:!0,routes:[{path:o.routes.positions,component:w,getTitle:function(){return(0,i.localize)("Open positions")},icon_component:"IcOpenPositions",default:!0},{path:o.routes.profit,component:w,getTitle:function(){return(0,i.localize)("Profit table")},icon_component:"IcProfitTable"},{path:o.routes.statement,component:w,getTitle:function(){return(0,i.localize)("Statement")},icon_component:"IcStatement"}]},{path:o.routes.contract,component:w,getTitle:function(){return(0,i.localize)("Contract Details")},is_authenticated:!0},{path:o.routes.error404,component:w,getTitle:function(){return(0,i.localize)("Error 404")}}]})]}({is_deriv_crypto:t,is_dashboard:n})))},x={component:E,getTitle:function(){return(0,i.localize)("Error 404")}};const k=function(e){var t=e.is_deriv_crypto,n=void 0===t||t,r=e.is_dashboard;return v||(v=N({is_deriv_crypto:n,is_dashboard:void 0===r||r})).push(x),v}},83902:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(60216),a=n.n(r),o=n(40841),i=n.n(o),c=n(32735),l=n(4390),s=n(14160),u=n(32577),_=n(75672),d=n(20374),m=n(8475),f=n(53151);var p=function(e){var t=e.notifications,n=e.toggleDialog;return c.createElement(c.Fragment,null,t.map((function(e){return c.createElement("div",{className:"notifications-item",key:e.key},c.createElement("h2",{className:"notifications-item__title"},e.type&&c.createElement(s.Icon,{icon:["contract_sold","info"].includes(e.type)?"IcAlertInfo":"IcAlert".concat((0,m.toTitleCase)(e.type)),className:i()("notifications-item__title-icon",(t={},r="notifications-item__title-icon--".concat(e.type),a=e.type,r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t))}),e.header),c.createElement("div",{className:"notifications-item__message"},e.message),c.createElement("div",{className:"notifications-item__action"},!(0,m.isEmptyObject)(e.action)&&c.createElement(c.Fragment,null,e.action.route?c.createElement(u.CG,{onClick:n,active_class:"notifications-item",className:i()("dc-btn","dc-btn--secondary","notifications-item__cta-button"),to:e.action.route},c.createElement(s.Text,{weight:"bold",size:"xxs"},e.action.text)):c.createElement(s.Button,{className:i()("dc-btn--secondary","notifications-item__cta-button"),onClick:e.action.onClick},c.createElement(s.Text,{weight:"bold",size:"xxs"},e.action.text)))));var t,r,a})))},g=c.forwardRef((function(e,t){var n=e.notifications,r=e.toggleDialog,a=!n.length;return c.createElement("div",{className:"notifications-dialog",ref:t},c.createElement("div",{className:"notifications-dialog__header"},c.createElement("h2",{className:"notifications-dialog__header-text"},c.createElement(d.Localize,{i18n_default_text:"Notifications"}))),c.createElement("div",{className:i()("notifications-dialog__content",{"notifications-dialog__content--empty":a})},c.createElement(s.ThemedScrollbars,{is_bypassed:(0,m.isMobile)()||a},a?c.createElement(f.X,null):c.createElement(p,{notifications:n,toggleDialog:r}))))}));g.displayName="NotificationListWrapper";var h=function(e){var t=e.is_visible,n=e.notifications,r=e.toggleDialog,a=c.useRef();return(0,s.useOnClickOutside)(a,(function(e){var n,o=!e.target.classList.contains("notifications-toggle__icon-wrapper");null!==(n=a.current)&&void 0!==n&&n.contains(e.target)||!t||!o||r()})),c.createElement(c.Fragment,null,c.createElement(s.MobileWrapper,null,c.createElement(s.MobileDialog,{portal_element_id:"modal_root",title:(0,d.localize)("Notifications"),wrapper_classname:"notifications-mobile-dialog",visible:t,onClose:r},c.createElement(g,{notifications:n,ref:a,toggleDialog:r}))),c.createElement(s.DesktopWrapper,null,c.createElement(l.Z,{in:t,classNames:{enter:"notifications-dialog--enter",enterDone:"notifications-dialog--enter-done",exit:"notifications-dialog--exit"},timeout:150,unmountOnExit:!0},c.createElement(g,{notifications:n,ref:a,toggleDialog:r}))))};h.propTypes={is_visible:a().bool,notifications:a().array,toggleDialog:a().func};const y=(0,_.$j)((function(e){var t=e.ui,n=e.common;return{notifications:t.filtered_notifications,app_routing_history:n.app_routing_history,removeNotificationByKey:t.removeNotificationByKey,removeNotificationMessage:t.removeNotificationMessage}}))(h)},78568:(e,t,n)=>{"use strict";n.d(t,{FX:()=>a,GH:()=>o,Sj:()=>i});var r=n(20374),a={SUCCESS:1,WARN:0,DANGER:-1,PENDING:-2},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.account_residence,a=void 0===n?"":n;if("be"===a)return(0,r.localize)("Real Synthetic");if("im"===a)return(0,r.localize)("Deriv account");switch(e){case"svg":return(0,r.localize)("Deriv account");case"iom":case"malta":return(0,r.localize)("Deriv Synthetic");case"maltainvest":return(0,r.localize)("Deriv Financial");default:return(0,r.localize)("Deriv")}},i=function(e){var t=e.landing_company_shortcode,n=void 0===t?"":t,r=e.is_fully_authenticated,o=void 0!==r&&r,i=e.is_age_verified,c=void 0!==i&&i,l=e.is_isle_of_man_residence,s=void 0!==l&&l,u=e.is_belgium_residence;return"svg"===n||s||void 0!==u&&u?a.SUCCESS:"iom"===n?o?a.SUCCESS:c?a.WARN:a.DANGER:a.SUCCESS}},93802:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var r=n(40841),a=n.n(r),o=n(60216),i=n.n(o),c=n(32735),l=n(8475),s=n(75672),u=function(e){var t=e.is_mobile,n=e.server_time,r=(0,l.toGMTFormat)(n);return c.createElement("div",{className:a()("server-time",{"server-time--is-mobile":t})},r)};u.propTypes={is_mobile:i().bool,server_time:i().object};const _=(0,s.$j)((function(e){return{server_time:e.common.server_time}}))(u)},95793:(e,t,n)=>{"use strict";var r=n(60216),a=n.n(r),o=n(32735),i=n(12788),c=n(14956),l=n(40001),s=n.n(l),u=n(14160),_=n(8475),d=n(20374),m=n(25078),f=n.n(m),p=n(3968),g=n(75672),h=n(22816);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var v=function(e){var t=e.toasts,n=e.removeToast;if(0===t.length)return null;var r=t.filter((function(e){return!e.is_bottom})),a=t.filter((function(e){return e.is_bottom})),c=function(e){var t=e.key,r=e.content,a=b(e,["key","content"]);return o.createElement(u.Toast,y({key:t},a,{onClose:function(){return n(t)}}),r)},l=o.createElement(u.Div100vhContainer,{className:"toast-messages",height_offset:"15px"},o.createElement("div",{className:"toast-messages__top"},r.map(c)),o.createElement("div",{className:"toast-messages__bottom"},a.map(c)));return i.createPortal(l,document.getElementById("popup_root"))};v.propTypes={toasts:a().arrayOf(a().shape({key:a().string,timeout:a().number,content:a().oneOfType([a().node,a().string]),type:a().oneOf(["error","info"]),is_bottom:a().bool})),removeToast:a().func};const E=(0,g.$j)((function(e){var t=e.ui;return{toasts:t.toasts,removeToast:t.removeToast}}))(v);var w=n(61407),S=n(40841),A=n.n(S),z=n(13799),O=n(59403),C=n(96363);function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=new _.CookieStorage(_.TRACKING_STATUS_KEY),T=function(e){var t=e.children,n=e.identifyEvent,r=e.is_app_disabled,a=e.is_cashier_visible,i=e.is_dark_mode,c=e.is_eu_country,l=e.is_eu,s=e.is_logged_in,d=e.is_logging_in,m=e.is_mt5_page,f=e.is_positions_drawer_on,g=e.is_route_modal_on,h=e.notifyAppInstall,y=e.pageView,b=e.pushDataLayer,v=N(o.useState(!1),2),E=v[0],w=v[1],S=N(o.useState(!1),2),z=S[0],x=S[1],T=k.get(_.TRACKING_STATUS_KEY);o.useEffect((function(){(!c||"accepted"===T)&&!z&&(b({event:"allow_tracking"}),x(!0))}),[z,c,b,T]),o.useEffect((function(){T||s||d||p.Z.wait("website_status").then((function(){w(c)}))}),[T,s,c,d]),n(),y(),o.useEffect((function(){var e=function(e){e.preventDefault(),h(e)};return window.addEventListener("beforeinstallprompt",e),function(){return window.removeEventListener("beforeinstallprompt",e)}}),[h]);return o.createElement("div",{id:"app_contents",className:A()("app-contents",{"app-contents--show-positions-drawer":f,"app-contents--is-disabled":r,"app-contents--is-mobile":(0,_.isMobile)(),"app-contents--is-route-modal":g,"app-contents--is-scrollable":m||a})},o.createElement(u.MobileWrapper,null,t),o.createElement(u.DesktopWrapper,null,o.createElement(O.Z,{is_logged_in:s,is_eu:l}),o.createElement(u.ThemedScrollbars,{height:"calc(100vh - 84px)",has_horizontal:!0},t)),E&&o.createElement(C.Z,{onAccept:function(){k.set(_.TRACKING_STATUS_KEY,"accepted",{sameSite:"none",secure:!0}),b({event:"allow_tracking"}),w(!1),x(!0)},onDecline:function(){k.set(_.TRACKING_STATUS_KEY,"declined",{sameSite:"none",secure:!0}),w(!1)},is_open:E,is_dark_mode:i}))};T.propTypes={children:a().any,is_app_disabled:a().bool,is_cashier_visible:a().bool,is_logged_in:a().bool,is_mt5_page:a().bool,is_positions_drawer_on:a().bool,is_route_modal_on:a().bool};const I=(0,z.withRouter)((0,g.$j)((function(e){var t=e.client,n=e.gtm,r=e.rudderstack,a=e.ui;return{is_eu_country:t.is_eu_country,is_eu:t.is_eu,is_logged_in:t.is_logged_in,is_logging_in:t.is_logging_in,pushDataLayer:n.pushDataLayer,identifyEvent:r.identifyEvent,pageView:r.pageView,is_app_disabled:a.is_app_disabled,is_cashier_visible:a.is_cashier_visible,is_dark_mode:a.is_dark_mode_on,is_mt5_page:a.is_mt5_page,is_positions_drawer_on:a.is_positions_drawer_on,is_route_modal_on:a.is_route_modal_on,notifyAppInstall:a.notifyAppInstall}}))(T));function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const D=function(e){var t=P({},e),n=!!window.localStorage.getItem("is_deriv_crypto_app")&&"true"===window.localStorage.getItem("is_deriv_crypto_app"),r="true"===window.localStorage.getItem("is_dashboard"),a=M(o.useState(n),2),i=a[0],c=a[1],l=M(o.useState(r),2),s={is_deriv_crypto:i,setDerivCrypto:c,DERIV_CRYPTO_KEY:"is_deriv_crypto_app",is_dashboard:l[0],setDerivDashboard:l[1],DERIV_DASHBOARD_KEY:"is_dashboard"};return o.createElement(_.PlatformContext.Provider,P({value:s},t))};var L=n(4514),R=n(57870),F=n(93802),W=function(){return o.createElement("div",{className:"footer-icon-separator"})},U=function(e,t){var n=e.Component;return o.createElement(o.Fragment,{key:"footer-link-".concat(e.position,"-").concat(t)},e.has_left_separator&&o.createElement(W,null),o.createElement(n,null),e.has_right_separator&&o.createElement(W,null))},B=function(e){var t=e.enableApp,n=e.footer_extensions,r=e.is_app_disabled,a=e.is_eu,i=e.is_logged_in,c=e.is_route_modal_on,l=e.is_settings_modal_on,s=e.is_virtual,u=e.disableApp,_=e.toggleSettingsModal,d=e.settings_extension,m=e.landing_company_shortcode,f=[],p=[];return n.filter&&(f=n.filter((function(e){return"left"===e.position})),p=n.filter((function(e){return"right"===e.position}))),o.createElement("footer",{className:A()("footer",{"footer--is-disabled":r||c})},f.length>0&&o.createElement("div",{className:"footer__links footer__links--left"},f.map(U)),o.createElement(L.hI,null),o.createElement(L.Ie,null),o.createElement(F.Z,null),o.createElement("div",{className:"footer__links"},p.map(U),o.createElement(R.Z,null),o.createElement(W,null),o.createElement(L.jU,null),o.createElement(L.Nb,null),i&&o.createElement(L.J0,null),!s&&o.createElement(L.W0,{landing_company:m,is_eu:a}),o.createElement(W,null),o.createElement(L.l1,null),o.createElement(L.VR,{is_settings_visible:l,toggleSettings:_,disableApp:u,enableApp:t,settings_extension:d}),o.createElement(L.Yx,null)))};B.propTypes={is_app_disabled:a().bool,is_logged_in:a().bool,is_route_modal_on:a().bool,is_settings_modal_on:a().bool,landing_company_shortcode:a().string,location:a().object,toggleSettingsModal:a().func};const $=(0,z.withRouter)((0,g.$j)((function(e){var t=e.client,n=e.ui;return{enableApp:n.enableApp,footer_extensions:n.footer_extensions,settings_extension:n.settings_extension,is_app_disabled:n.is_app_disabled,is_route_modal_on:n.is_route_modal_on,is_logged_in:t.is_logged_in,is_eu:t.is_eu,is_loading:n.is_loading,is_settings_modal_on:n.is_settings_modal_on,is_virtual:t.is_virtual,landing_company_shortcode:t.landing_company_shortcode,disableApp:n.disableApp,toggleSettingsModal:n.toggleSettingsModal}}))(B));var Z=n(11818);const V=[{icon:"IcBrandDtrader",title:function(){return(0,d.localize)("DTrader")},name:"DTrader",description:function(){return(0,d.localize)("A whole new trading experience on a powerful yet easy to use platform.")},link_to:_.routes.trade},{icon:"IcBrandDbot",title:function(){return(0,d.localize)("DBot")},name:"DBot",description:function(){return(0,d.localize)("Automated trading at your fingertips. No coding needed.")},link_to:_.routes.bot},{icon:"IcBrandDmt5",title:function(){return(0,d.localize)("DMT5")},name:"DMT5",description:function(){return(0,d.localize)("The platform of choice for professionals worldwide.")},link_to:_.routes.mt5},{icon:"IcBrandSmarttrader",title:function(){return(0,d.localize)("SmartTrader")},name:"SmartTrader",description:function(){return(0,d.localize)("Trade the world’s markets with our popular user-friendly platform")},href:_.routes.smarttrader}];var Y=n(19465),H=n.n(Y);function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const X=function(e){return o.createElement("div",{className:"account-signup-loader"},o.createElement(u.Loading,G({},e,{is_fullscreen:!1})))};var K=n(84454),q=n.n(K),J=n(10318),Q=n.n(J),ee=n(54896),te=n.n(ee),ne=n(16680),re=n.n(ne),ae=n(43321),oe=n.n(ae),ie=n(46389),ce=n.n(ie),le=n(44397),se=n.n(le),ue=n(46491),_e=n.n(ue);const de=(0,g.$j)((function(e){var t=e.client,n=e.ui;return{currencies:t.currencies_list,has_currency:!!t.currency,has_real_account:t.has_active_real_account,legal_allowed_currencies:t.upgradeable_currencies,real_account_signup:n.real_account_signup,resetRealAccountSignupParams:n.resetRealAccountSignupParams,selectable_currencies:t.selectable_currencies}}))(_e());var me=n(4138),fe=n.n(me);const pe=(0,g.$j)((function(e){var t=e.client;return{is_gb_residence:"gb"===t.residence,fetchStatesList:t.fetchStatesList,states_list:t.states_list}}))(fe());var ge=n(18608),he=n.n(ge);const ye=(0,g.$j)((function(e){var t=e.client;return{is_gb_residence:"gb"===t.residence,fetchStatesList:t.fetchStatesList,states_list:t.states_list}}))(he());function be(e){return function(e){if(Array.isArray(e))return ve(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ve(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ee=function(e){return"samoa"!==e.real_account_signup_target},we=function(e){return[].concat(be(Ee(e)?[q()(e,de)]:[]),be(Ee(e)?[Q()(e,ce())]:[]),be(Ee(e)?[te()(e,ye)]:[]),be("maltainvest"===e.real_account_signup_target?[oe()(e,pe)]:[]),[re()(e,se())])};function Se(){return(Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ce(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Ne(e){return function(e){if(Array.isArray(e))return Te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ke(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||ke(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){if(e){if("string"==typeof e)return Te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Te(e,t):void 0}}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ie=function(e){var t=e.has_target,n=e.has_real_account,r=e.has_currency,a=e.items,i=e.getCurrentStep,c=e.getTotalSteps,l=i()-1,s=a[l].header.active_title,_=a[l].header.title;return o.createElement(o.Fragment,null,(!n||t)&&r&&o.createElement(o.Fragment,null,o.createElement(u.DesktopWrapper,null,o.createElement(u.FormProgress,{steps:a,current_step:l})),o.createElement(u.MobileWrapper,null,o.createElement("div",{className:"account-wizard__header-steps"},s&&o.createElement("h4",{className:"account-wizard__header-steps-subtitle"},s),o.createElement("h4",{className:"account-wizard__header-steps-title"},o.createElement(d.Localize,{i18n_default_text:"Step {{step}}: {{step_title}} ({{step}} of {{steps}})",values:{step:l+1,steps:c(),step_title:_}}))))),o.createElement(u.DesktopWrapper,null,n&&(!t||!r)&&o.createElement("div",{className:"account-wizard__set-currency"},!r&&o.createElement("p",null,o.createElement(d.Localize,{i18n_default_text:"You have an account that do not have currency assigned. Please choose a currency to trade with this account."})),o.createElement("h2",null,o.createElement(d.Localize,{i18n_default_text:"Please choose your currency"})))))},Me=function(e){var t=xe(o.useState(void 0),1)[0],n=xe(o.useState(!1),2),r=n[0],a=n[1],i=xe(o.useState(""),2),c=i[0],l=i[1],s=xe(o.useState([]),2),d=s[0],m=s[1],f=xe(o.useState([]),2),p=f[0],g=f[1];o.useEffect((function(){e.fetchStatesList();var t=(0,_.makeCancellablePromise)(e.fetchResidenceList()),n=t.cancel,r=t.promise,o=(0,_.makeCancellablePromise)(e.fetchFinancialAssessment()),i=o.cancel,c=o.promise;return Promise.all([r,c]).then((function(){g((function(t){return t.length?t:we(e)})),m(h()),a(!0)})),function(){n(),i()}}),[]),o.useEffect((function(){if(d.length>0){var e=Ne(p);d.forEach((function(t,n){t instanceof Object&&(e[n].form_value=t)})),g(e),m([])}}),[d]),o.useEffect((function(){if(e.residence_list.length){y(e.residence_list).then((function(t){var n,r;(r=p.length?p:we(e)).length>1&&"phone"in(null===(n=r[1])||void 0===n?void 0:n.form_value)&&(r[1].form_value.phone=r[1].form_value.phone||t||"",g(r))}))}}),[e.residence_list]);var h=function(){var e=localStorage.getItem("real_account_signup_wizard");try{return JSON.parse(e)||[]}catch(e){return[]}finally{localStorage.removeItem("real_account_signup_wizard")}},y=function(){var t,n=(t=regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=n.find((function(t){return t.value===e.residence})))&&r.phone_idd){t.next=3;break}return t.abrupt("return","");case 3:return t.abrupt("return","+".concat(r.phone_idd));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){Ce(o,r,a,i,c,"next",e)}function c(e){Ce(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),b=function(){return p.map((function(e){return e.form_value})).reduce((function(t,n){var r=H()(new Map(Object.entries(n)));return r.date_of_birth&&(r.date_of_birth=(0,_.toMoment)(r.date_of_birth).format("YYYY-MM-DD")),r.place_of_birth&&(r.place_of_birth=r.place_of_birth?(0,_.getLocation)(e.residence_list,r.place_of_birth,"value"):""),r.citizen&&(r.citizen=r.citizen?(0,_.getLocation)(e.residence_list,r.citizen,"value"):""),r.tax_residence&&(r.tax_residence=r.tax_residence?(0,_.getLocation)(e.residence_list,r.tax_residence,"value"):r.tax_residence),ze(ze({},t),r)}))},v=function(){l("")},E=function(t,n){t-1<0?e.onClose():(n(),v())},w=function(t,n,r,a){S(t,n),v(),!e.has_currency&&e.has_real_account||t+1>=p.length?O(r):a()},S=function(e,t){var n=Object.assign([],p);n[e].form_value=t,g(n)},z=function(e,t){return e?p[t][e]:p[t]},O=function(t){var n;e.setLoading(!0),e.has_real_account&&!e.has_currency?e.setAccountCurrency(b().currency).then((function(t){e.onFinishSuccess(t.echo_req.set_account_currency.toLowerCase())})).catch((function(e){l(e),t(!1)})).finally((function(){return e.setLoading(!1)})):(n=ze({},b()),null==n||delete n.tax_identification_confirm,e.realAccountSignup(n)).then((function(t){"maltainvest"===e.real_account_signup_target?e.onFinishSuccess(t.new_account_maltainvest.currency.toLowerCase()):"samoa"===e.real_account_signup_target?e.onOpenWelcomeModal(t.new_account_samoa.currency.toLowerCase()):e.onFinishSuccess(t.new_account_real.currency.toLowerCase())})).catch((function(t){e.onError(t,p)})).finally((function(){return e.setLoading(!1)}))};if(e.is_loading)return o.createElement(X,null);if(!r)return null;if(!t){var C=p.map((function(t,n){var r=function(t){var n=z("passthrough",t),r=z("props",t)||{};return n&&n.length&&(n.forEach((function(t){Object.assign(r,Oe({},t,e[t]))})),r.bypass_to_personal=d.length>0),r}(n),a=t.body;return o.createElement(a,Se({value:z("form_value",n),index:n,onSubmit:w,onCancel:E,onSave:S,has_currency:e.has_currency,form_error:c},r,{key:n}))})),N=o.createElement("div",null);return"samoa"!==e.real_account_signup_target&&(N=o.createElement(Ie,{has_real_account:e.has_real_account,items:p,has_currency:e.has_currency,has_target:"manage"!==e.real_account_signup_target})),o.createElement(u.Wizard,{nav:N,className:A()("account-wizard",{"account-wizard--set-currency":!e.has_currency,"account-wizard--deriv-crypto":"samoa"===e.real_account_signup_target})},C)}var x=t;return o.createElement(x,null)};Me.propTypes={fetchResidenceList:a().func,has_currency:a().bool,has_real_account:a().bool,onError:a().func,onLoading:a().func,onFinishSuccess:a().func,onOpenWelcomeModal:a().func,realAccountSignup:a().func,residence:a().string,residence_list:a().array,setAccountCurrency:a().func};const je=(0,g.$j)((function(e){var t=e.client,n=e.ui;return{account_settings:t.account_settings,is_fully_authenticated:t.is_fully_authenticated,realAccountSignup:t.realAccountSignup,has_real_account:t.has_active_real_account,upgrade_info:t.upgrade_info,real_account_signup_target:n.real_account_signup_target,has_currency:!!t.currency,setAccountCurrency:t.setAccountCurrency,residence:t.residence,residence_list:t.residence_list,states_list:t.states_list,fetchStatesList:t.fetchStatesList,fetchResidenceList:t.fetchResidenceList,refreshNotifications:t.refreshNotifications,fetchFinancialAssessment:t.fetchFinancialAssessment,needs_financial_assessment:t.needs_financial_assessment,financial_assessment:t.financial_assessment}}))(Me);var Pe=n(58468),De=n(71838),Le=n(39677),Re=n.n(Le),Fe=n(57390),We=n.n(Fe),Ue=function(){return[o.createElement(d.Localize,{key:0,i18n_default_text:"Choose your preferred cryptocurrency"}),o.createElement(d.Localize,{key:1,i18n_default_text:"You can open an account for each cryptocurrency."}),o.createElement(d.Localize,{key:2,i18n_default_text:"Add a real account"}),o.createElement(d.Localize,{key:3,i18n_default_text:"Choose a currency you would like to trade with."})]},Be=function(e){var t=e.heading,n=e.subheading;return o.createElement(o.Fragment,null,o.createElement("h1",{className:"add-crypto-currency__title"},t),o.createElement("h3",{className:"add-crypto-currency__sub-title"},n))},$e="crypto",Ze=function(e){var t=e.available_crypto_currencies,n=e.form_error,r=e.has_fiat,a=e.legal_allowed_currencies,i=e.onSubmit,c=e.should_show_crypto_only,l=e.should_show_fiat_only,s=e.value,m=function(){return(0,_.reorderCurrencies)(a.filter((function(e){return"fiat"===e.type})))},f=function(){return(0,_.reorderCurrencies)(a.filter((function(e){return e.type===$e})),$e)},p=function(){return!r&&!c},g=function(e){return-1===t.map((function(e){return e.value})).indexOf(e.value)};return o.createElement(De.Formik,{initialValues:{currency:s.currency},onSubmit:function(e,t){i(!1,e,t.setSubmitting)}},(function(e){var r=e.handleSubmit,a=e.values,i=e.errors,c=e.touched,s=e.isSubmitting;return o.createElement("form",{onSubmit:r},!p()&&o.createElement(Be,{heading:Ue()[0],subheading:Ue()[1]}),p()&&o.createElement(Be,{heading:Ue()[2],subheading:Ue()[3]}),p()&&o.createElement(o.Fragment,null,o.createElement(Re(),{id:"fiat_currency",is_fiat:!0,className:"currency-selector__radio-group currency-selector__radio-group--with-margin",value:a.currency,error:i.currency,touched:c.currency,is_title_enabled:p(),item_count:m().length},m().map((function(e){return o.createElement(De.Field,{key:e.value,component:We(),name:"currency",id:e.value,label:e.name})})))),p()&&o.createElement(u.Text,{as:"p",color:"prominent",size:"xxs",className:"currency-selector__deposit-warn"},o.createElement(d.Localize,{i18n_default_text:"You’ll be not able to change currency once you have made a deposit."})),!l&&(0!==t.length?o.createElement(Re(),{id:"crypto_currency",className:"currency-selector__radio-group currency-selector__radio-group--with-margin",label:(0,d.localize)("Cryptocurrencies"),value:a.currency,error:i.currency,touched:c.currency,is_title_enabled:p(),item_count:f().length},f().map((function(e){return o.createElement(De.Field,{key:e.value,component:We(),name:"currency",id:e.value,label:e.name,selected:g(e)})}))):o.createElement(Re(),{id:"crypto_currency",className:"currency-selector__radio-group currency-selector__radio-group--with-margin",label:(0,d.localize)("Cryptocurrencies"),is_title_enabled:p(),item_count:f().length},f().map((function(e){return o.createElement(De.Field,{key:e.value,component:We(),name:"currency",id:e.value,label:e.name,selected:!0})})))),o.createElement(u.FormSubmitButton,{className:"currency-selector__button",is_disabled:s||!a.currency,label:(0,d.localize)("Add account"),is_absolute:!(0,_.isMobile)(),form_error:n}))}))};Ze.propTypes={available_crypto_currencies:a().array,legal_allowed_currencies:a().array,has_fiat:a().bool};const Ve=(0,g.$j)((function(e){var t=e.client;return{available_crypto_currencies:t.available_crypto_currencies,legal_allowed_currencies:t.upgradeable_currencies,has_fiat:t.has_fiat}}))(Ze);function Ye(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var He=function(e){var t=e.legal_allowed_currencies,n=e.value,r=e.onSubmit,a=e.form_error,i=Ye(e,["legal_allowed_currencies","value","onSubmit","form_error"]),c=function(){return(0,_.reorderCurrencies)(t.filter((function(e){return"fiat"===e.type})))};return o.createElement(De.Formik,{initialValues:{fiat:n.fiat},onSubmit:function(e,t){r(!1,e,t.setSubmitting)}},(function(e){var t=e.handleSubmit,n=e.values,r=e.errors,l=e.touched,s=e.isSubmitting;return o.createElement("form",{onSubmit:function(e){e.preventDefault(),t()}},o.createElement("h1",{className:"change-currency__title"},o.createElement(d.Localize,{i18n_default_text:"Change your currency"})),o.createElement("h3",{className:"change-currency__sub-title"},o.createElement(d.Localize,{i18n_default_text:"Choose the currency you would like to trade with."})),o.createElement(Re(),{id:"fiat",label:(0,d.localize)("Cryptocurrencies"),className:"currency-selector__radio-group currency-selector__radio-group--with-margin",value:n.fiat,error:r.fiat,touched:l.fiat,is_title_enabled:!1,item_count:c().length},c().map((function(e){return o.createElement(De.Field,{key:e.value,component:We(),name:"fiat",id:e.value,label:e.name,selected:e.value===i.currency})}))),o.createElement(u.FormSubmitButton,{className:"change-currency__button",is_disabled:s||!n.fiat,label:(0,d.localize)("Change currency"),is_absolute:!(0,_.isMobile)(),form_error:a}))}))};He.propTypes={form_error:a().string,legal_allowed_currencies:a().array};const Ge=(0,g.$j)((function(e){var t=e.client;return{legal_allowed_currencies:t.upgradeable_currencies,currency:t.currency}}))(He);function Xe(){return(Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ke(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qe=function(e){var t=o.useContext(_.PlatformContext).is_deriv_crypto,n=e.available_crypto_currencies,r=e.can_change_fiat_currency,a=e.createCryptoAccount,i=e.currency,c=e.current_currency_type,l=e.has_fiat,s=e.is_eu,m=e.is_loading,f=e.onError,p=e.onSuccessSetAccountCurrency,g=e.setCurrency,h=e.setLoading,y=qe(o.useState(l&&0===(null==n?void 0:n.length)?1:0),2),b=y[0],v=y[1],E=qe(o.useState(""),1)[0],w=qe(o.useState({crypto:"",fiat:""}),1)[0];o.useEffect((function(){(function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,Pe.WS.mt5LoginList();case 3:h(!1);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ke(o,r,a,i,c,"next",e)}function c(e){Ke(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}})()()}),[]);var S=function(e,n,r){!function(e,n){h(!0),Object.entries(e).map((function(e){var r=qe(e,2),o=r[0],i=r[1];"fiat"===o?g(i).then((function(e){n(!1),p(e.passthrough.previous_currency,e.echo_req.set_account_currency)})).catch((function(e){f(e)})).finally((function(){return h(!1)})):a(i,t).then((function(){p("",i),n(!1)})).catch((function(e){f(e)})).finally((function(){return h(!1)}))}))}(n,r)},z=function(){return 0===n.length&&l};if(m)return o.createElement(X,null);var O=l&&o.createElement("div",{className:A()("change-currency",{"account-wizard--disabled":!r})},!r&&o.createElement("div",{className:"account-wizard--disabled-message"},o.createElement("p",null,"fiat"===c?o.createElement(d.Localize,{i18n_default_text:"Currency change is not available because either you have deposited money into your {{currency}} account or you have created a real MetaTrader 5 (MT5) account.",values:{currency:(0,_.getCurrencyDisplayCode)(i)}}):o.createElement(d.Localize,{i18n_default_text:"Please switch to your {{fiat_currency}} account to change currencies.",values:{fiat_currency:e.current_fiat_currency.toUpperCase()}}))),o.createElement(Ge,Xe({className:"account-wizard__body",onSubmit:S,value:w,form_error:E},e)));return o.createElement(u.ThemedScrollbars,{is_bypassed:(0,_.isMobile)(),autohide:!1},s&&l?O:o.createElement(u.Tabs,{active_index:b,className:"account-wizard add-or-manage tabs--desktop",onTabItemClick:function(e){v(e)},top:!0,header_fit_content:(0,_.isDesktop)()},o.createElement("div",{label:(0,d.localize)("Cryptocurrencies")},o.createElement("div",{className:A()("add-crypto-currency",{"account-wizard--disabled":z()})},z()&&o.createElement("div",{className:"account-wizard--disabled-message"},o.createElement("p",null,(0,d.localize)("You already have an account for each of the cryptocurrencies available on {{deriv}}.",{deriv:_.website_name}))),o.createElement(Ve,Xe({className:"account-wizard__body",onSubmit:S,value:w,form_error:E,should_show_crypto_only:!0},e)))),!t&&o.createElement("div",{label:(0,d.localize)("Fiat currencies")},l?O:o.createElement(Ve,Xe({className:"account-wizard__body",onSubmit:S,value:w,form_error:E,should_show_fiat_only:!0},e)))))};Qe.propTypes={onError:a().func,onLoading:a().func,onSuccessSetAccountCurrency:a().func};const et=(0,g.$j)((function(e){var t=e.client;return{available_crypto_currencies:t.available_crypto_currencies,can_change_fiat_currency:t.can_change_fiat_currency,currency:t.currency,current_currency_type:t.current_currency_type,current_fiat_currency:t.current_fiat_currency,has_fiat:t.has_fiat,is_eu:t.is_eu,setCurrency:t.setAccountCurrency,createCryptoAccount:t.createCryptoAccount}}))(Qe);function tt(){return(tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function nt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const rt=(0,g.$j)((function(e){var t=e.client;return{available_crypto_currencies:t.available_crypto_currencies,can_change_fiat_currency:t.can_change_fiat_currency,currency:t.currency,current_currency_type:t.current_currency_type,current_fiat_currency:t.current_fiat_currency,is_eu:t.is_eu,has_fiat:t.has_fiat,landing_company_shortcode:t.landing_company_shortcode,setCurrency:t.setAccountCurrency,createCryptoAccount:t.createCryptoAccount}}))((function(e){var t=e.setLoading,n=e.onSuccessSetAccountCurrency,r=e.onError,a=e.available_crypto_currencies,i=e.has_fiat,c=e.landing_company_shortcode,l=e.is_loading,s=nt(e,["setLoading","onSuccessSetAccountCurrency","onError","available_crypto_currencies","has_fiat","landing_company_shortcode","is_loading"]),m=o.useState(""),f=o.useState({currency:""}),p=function(){return 0===a.length&&i};return l?o.createElement(X,null):o.createElement("div",{className:A()("set-currency-modal",{"set-currency-modal--disabled":p()})},p()&&o.createElement("div",{className:"set-currency-modal--disabled-message"},o.createElement("p",null,(0,d.localize)("You already have an account for each of the cryptocurrencies available on {{deriv}}.",{deriv:_.website_name}))),o.createElement("div",{className:"set-currency-modal__heading-container"},o.createElement(u.Text,{as:"p",size:"xs",line_height:"s",align:"center",className:"set-currency-modal__heading-container__main-heading"},(0,d.localize)("You have an account that do not have currency assigned. Please choose a currency to trade with this account.")),o.createElement(u.Text,{as:"p",weight:"bold",align:"center",className:"set-currency-modal__heading-container__sub-heading"},(0,d.localize)("Please choose your currency"))),o.createElement(de,tt({className:"account-wizard__body",onSubmit:function(e,a,o){!function(e,a){t(!0);var o=e.currency;o&&s.setCurrency(o).then((function(e){a(!1),n("",e.echo_req.set_account_currency)})).catch((function(e){r(e)})).finally((function(){return t(!1)}))}(a,o)},value:f,form_error:m,set_currency:!0,validate:(0,_.generateValidationFunction)(c,q())},s)))}));var at=function(e){var t=e.prev,n=e.current;return t?o.createElement(d.Localize,{i18n_default_text:"<0>You have successfully changed your currency to {{currency}}.</0><0>Make a deposit now to start trading.</0>",values:{currency:(0,_.getCurrencyDisplayCode)(n)},components:[o.createElement("p",{key:n})]}):o.createElement(d.Localize,{i18n_default_text:"<0>You have added a {{currency}} account.</0><0> Make a deposit now to start trading.</0>",values:{currency:(0,_.getCurrencyDisplayCode)(n)},components:[o.createElement("p",{key:n})]})},ot=function(e){var t=e.current,n=e.onCancel,r=e.onSubmit,a=e.prev,i=function(){return a?o.createElement(u.Icon,{icon:"IcCurrency-".concat(a.toLowerCase()),height:120,width:90}):null},c=function(){return o.createElement(u.Icon,{icon:"IcCurrency-".concat(t.toLowerCase()),height:120,width:90})},l=function(){return a?o.createElement(u.Icon,{icon:"IcArrowPointerRight",color:"red",width:50,height:20}):null},s=function(e){var t=e.className;return o.createElement(u.Icon,{className:t,icon:"IcCheckmarkCircle",color:"green"})};return o.createElement(u.Div100vhContainer,{className:"status-dialog",is_disabled:(0,_.isDesktop)(),height_offset:"40px"},o.createElement("div",{className:A()("status-dialog__icon-area",{"status-dialog__icon-area--center":(0,_.isMobile)(),"set-currency":!a})},o.createElement(i,null),o.createElement(l,null),o.createElement(c,null),o.createElement(s,{className:"bottom-right-overlay"})),o.createElement("div",{className:A()("status-dialog__body-area",{"status-dialog__body-area--no-grow":(0,_.isMobile)()})},o.createElement("h2",null,o.createElement(d.Localize,{i18n_default_text:"Success!"})),o.createElement(at,{prev:a,current:t})),o.createElement("div",{className:"status-dialog__btn-area"},o.createElement(u.Button,{onClick:n,text:(0,d.localize)("Maybe later"),secondary:!0}),o.createElement(u.Button,{onClick:r,text:(0,d.localize)("Deposit now"),primary:!0})))};const it=o.memo(ot);var ct=function(e){switch(e.code){case"InvalidPhone":return o.createElement("h1",null,o.createElement(d.Localize,{i18n_default_text:"Let’s try that again"}));case"DuplicateAccount":return o.createElement("h1",null,o.createElement(d.Localize,{i18n_default_text:"Already signed up?"}));default:return o.createElement("h1",null,o.createElement(d.Localize,{i18n_default_text:"Something’s not right"}))}},lt=function(e){var t=e.code,n=e.message;switch(t){case"DuplicateAccount":return o.createElement("p",null,o.createElement(d.Localize,{i18n_default_text:"An account with your details already exists."}),o.createElement("br",null),o.createElement(d.Localize,{i18n_default_text:"If you're having trouble signing in, let us know via <0>chat</0>",components:[o.createElement("span",{className:"chat-inline",key:0,onClick:function(){return window.LC_API.open_chat_window()}})]}));default:return o.createElement("p",null,n)}},st=function(e){var t=e.text,n=e.onConfirm;return o.createElement(u.Button,{primary:!0,onClick:n,large:!0},t)},ut=function(e){var t=e.code,n=e.onConfirm;switch(t){case"CurrencyTypeNotAllowed":return o.createElement(st,{text:(0,d.localize)("Try a different currency"),onConfirm:n});case"InvalidPhone":return o.createElement(st,{text:(0,d.localize)("Try a different phone number"),onConfirm:n});case"DuplicateAccount":return null;default:return o.createElement(u.StaticUrl,{href:"help-centre",type:"button",className:"dc-btn dc-btn--primary"},o.createElement(u.Text,{weight:"bold",color:"white",size:"xxs"},o.createElement(d.Localize,{i18n_default_text:"OK"})))}},_t=function(e){var t=e.message,n=e.code,r=e.onConfirm;return o.createElement("div",{className:"account-wizard--error"},o.createElement(u.Icon,{icon:"IcAccountError",size:115}),o.createElement(ct,{code:n}),o.createElement(lt,{code:n,message:t}),o.createElement(ut,{code:n,onConfirm:r}))};_t.propTypes={code:a().string,message:a().string,onConfirm:a().func};const dt=_t;var mt=n(78568),ft=function(e){var t=e.status;return o.createElement("h2",null,t===mt.FX.SUCCESS&&o.createElement(d.Localize,{i18n_default_text:"Your account is ready"}),t===mt.FX.WARN&&o.createElement(d.Localize,{i18n_default_text:"Proof of address verification failed"}),t===mt.FX.DANGER&&o.createElement(d.Localize,{i18n_default_text:"Proof of identity and address verification failed"}),t===mt.FX.PENDING&&o.createElement(d.Localize,{i18n_default_text:"Your proofs of identity and address were submitted successfully"}))},pt=function(e){var t=e.status;switch(e.landing_company_shortcode){case"iom":return o.createElement(ft,{status:t});default:return o.createElement("h2",null,o.createElement(d.Localize,{i18n_default_text:"Your account is ready"}))}};pt.propTypes={status:a().number.isRequired,landing_company_shortcode:a().string.isRequired};var gt=function(e){var t=e.status,n=void 0===t?mt.FX.SUCCESS:t,r="";if("maltainvest"===e.landing_company_shortcode)r=o.createElement(d.Localize,{i18n_default_text:"We need proofs of your identity and address before you can start trading."});else switch(n){case mt.FX.WARN:r=o.createElement(d.Localize,{i18n_default_text:"We were unable to verify your proof of address document. You can upload a new document to try again."});break;case mt.FX.DANGER:r=o.createElement(d.Localize,{i18n_default_text:"We were unable to verify your proof of identity and address documents. You can upload new documents to try again."});break;default:r=o.createElement(d.Localize,{i18n_default_text:"Fund your account to start trading."})}return o.createElement("p",{className:"status-dialog__text"},r)};gt.propTypes={currency:a().string,is_isle_of_man_residence:a().bool,landing_company_shortcode:a().string,status:a().number};var ht=function(e){var t=function(e){var t=e.status,n=e.landing_company_shortcode,r=e.closeModalAndOpenCashier,a=e.closeModalAndOpenPOI,o=e.closeModalAndOpenPOA;switch(n){case"iom":return t===mt.FX.DANGER?{label:(0,d.localize)("Submit proofs"),action:a}:t===mt.FX.WARN?{label:(0,d.localize)("Upload documents"),action:o}:{label:(0,d.localize)("Deposit now"),action:r};case"maltainvest":return{label:(0,d.localize)("Submit proof"),action:a};case"svg":case"malta":default:return{label:(0,d.localize)("Deposit now"),action:r}}}({status:e.status,landing_company_shortcode:e.landing_company_shortcode,closeModalAndOpenCashier:e.closeModalAndOpenCashier,closeModalAndOpenPOI:e.closeModalAndOpenPOI,closeModalAndOpenPOA:e.closeModalAndOpenPOA}),n=t.label,r=t.action;return o.createElement(u.Button,{primary:!0,text:n,onClick:r})},yt=function(e){var t=function(e){var t=e.status,n=e.landing_company_shortcode,r=e.closeModal,a=e.switchToVirtual;switch(n){case"iom":return t===mt.FX.SUCCESS?{label:(0,d.localize)("Maybe later"),action:r}:t===mt.FX.WARN?{label:(0,d.localize)("Trade on demo account"),action:function(){r(),a()}}:{label:(0,d.localize)("Maybe later"),action:r};default:return{label:(0,d.localize)("Maybe later"),action:r}}}({status:e.status,landing_company_shortcode:e.landing_company_shortcode,closeModal:e.closeModal,switchToVirtual:e.switchToVirtual}),n=t.label,r=t.action;return o.createElement(u.Button,{secondary:!0,text:n,onClick:r})},bt=function(e){var t=e.status,n=e.landing_company_shortcode,r=e.closeModal,a=e.closeModalAndOpenCashier,i=e.closeModalAndOpenPOA,c=e.closeModalAndOpenPOI,l=e.switchToVirtual;return o.createElement("div",{className:"status-dialog__btn-area"},o.createElement(yt,{closeModal:r,status:t,landing_company_shortcode:n,switchToVirtual:l}),o.createElement(ht,{status:t,landing_company_shortcode:n,closeModalAndOpenCashier:a,closeModalAndOpenPOI:c,closeModalAndOpenPOA:i}))};bt.propTypes={status:a().number,landing_company_shortcode:a().string,closeModal:a().func,closeModalAndOpenCashier:a().func,closeModalAndOpenPOI:a().func,switchToVirtual:a().func};var vt=function(e){var t=e.currency;return o.createElement(u.Icon,{icon:"IcCurrency-".concat(t.toLowerCase()),size:120})},Et=function(e){var t=e.className;return o.createElement(u.Icon,{className:t,icon:"IcCheckmarkCircle",color:"green",size:24})},wt=function(e){var t=e.className;return o.createElement(u.Icon,{className:t,icon:"IcAlertDanger",size:24})},St=function(e){var t=e.className;return o.createElement(u.Icon,{className:t,icon:"IcCrossCircle",size:24,color:"red"})},At=function(e){var t=e.closeModal,n=e.currency,r=e.history,a=e.icon_size,i=e.is_age_verified,c=e.is_belgium_residence,l=e.is_fully_authenticated,s=e.is_isle_of_man_residence,d=e.landing_company_shortcode,m=e.switchToVirtual,f=function(){return(0,mt.Sj)({landing_company_shortcode:d,is_fully_authenticated:l,is_age_verified:i,is_isle_of_man_residence:s,is_belgium_residence:c})};return o.createElement(u.Div100vhContainer,{className:"status-dialog",is_disabled:(0,_.isDesktop)(),height_offset:"40px"},o.createElement("div",{className:A()("status-dialog__icon-area",{"status-dialog__icon-area--large":"large"===a,"status-dialog__icon-area--xlarge":"xlarge"===a})},o.createElement(vt,{currency:n}),f()===mt.FX.SUCCESS&&o.createElement(Et,{className:"bottom-right-overlay"}),f()===mt.FX.WARN&&o.createElement(wt,{className:"bottom-right-overlay"}),f()===mt.FX.DANGER&&o.createElement(St,{className:"bottom-right-overlay"})),o.createElement("div",{className:A()("status-dialog__body-area",{"status-dialog__body-area--no-grow":(0,_.isMobile)()})},o.createElement(pt,{status:f(),landing_company_shortcode:d}),o.createElement(gt,{status:f(),landing_company_shortcode:d,currency:n})),o.createElement(bt,{landing_company_shortcode:d,status:f(),closeModal:t,closeModalAndOpenPOI:function(){t(),r.push(_.routes.proof_of_identity)},closeModalAndOpenPOA:function(){t(),r.push(_.routes.proof_of_address)},closeModalAndOpenCashier:function(){t(),r.push(_.routes.cashier_deposit)},switchToVirtual:m}))};At.defaultProps={icon_size:"large"},At.propTypes={currency:a().string,closeModal:a().func,icon:a().object,icon_size:a().string,is_isle_of_man_residence:a().bool,is_belgium_residence:a().bool};const zt=(0,g.$j)((function(e){var t=e.client;return{landing_company_shortcode:t.landing_company_shortcode,is_fully_authenticated:t.is_fully_authenticated,is_age_verified:t.is_age_verified,is_isle_of_man_residence:"im"===t.residence,is_belgium_residence:"be"===t.residence,switchToVirtual:function(){return t.switchAccount(t.virtual_account_loginid)}}}))((0,z.withRouter)(At));function Ot(e){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xt=0,kt=1,Tt=2,It=3,Mt=4,jt=5,Pt=function(e){var t=e.real_account_signup_target,n=e.currency,r=e.is_isle_of_man_residence,a=e.is_belgium_residence;if(!n&&"maltainvest"!==t)return o.createElement(d.Localize,{i18n_default_text:"Set a currency for your real account"});if("malta"===t&&a)return o.createElement(d.Localize,{i18n_default_text:"Add a Deriv Synthetic account"});if("iom"===t&&r)return o.createElement(d.Localize,{i18n_default_text:"Add a Deriv account"});switch(t){case"malta":case"iom":return o.createElement(d.Localize,{i18n_default_text:"Add a Deriv Synthetic account"});case"maltainvest":return o.createElement(d.Localize,{i18n_default_text:"Add a Deriv Financial account"});case"samoa":return o.createElement(d.Localize,{i18n_default_text:"Terms of use"});default:return o.createElement(d.Localize,{i18n_default_text:"Add a Deriv account"})}};const Dt=(0,g.$j)((function(e){var t=e.ui,n=e.client,r=e.common;return{has_real_account:n.has_active_real_account,currency:n.currency,is_eu:n.is_eu,is_real_acc_signup_on:t.is_real_acc_signup_on,real_account_signup_target:t.real_account_signup_target,closeRealAccountSignup:t.closeRealAccountSignup,toggleWelcomeModal:t.toggleWelcomeModal,setParams:t.setRealAccountSignupParams,residence:n.residence,is_isle_of_man_residence:"im"===n.residence,is_belgium_residence:"be"===n.residence,state_value:t.real_account_signup,routing_history:r.app_routing_history}}))((0,z.withRouter)((function(e){var t=e.closeRealAccountSignup,n=e.currency,r=e.has_real_account,a=e.history,i=e.is_belgium_residence,c=e.is_isle_of_man_residence,l=e.is_eu,s=e.is_real_acc_signup_on,m=e.real_account_signup_target,f=e.routing_history,p=e.setParams,g=e.state_index,h=e.state_value,y=e.toggleWelcomeModal,b=Ct(o.useState(null),2),v=b[0],E=b[1],w=Ct(o.useState(!1),2),S=w[0],z=w[1],O=Ct(o.useState(null),2),C=O[0],N=O[1],x=Ct(o.useState([{action:"signup",body:function(e){return o.createElement(je,{onFinishSuccess:k,onOpenWelcomeModal:T,is_loading:e.is_loading,setLoading:j,onError:P,onClose:D})},title:Pt},{action:"multi",body:function(e){return o.createElement(et,{onSuccessSetAccountCurrency:M,is_loading:e.is_loading,setLoading:j,onError:P})},title:function(e){return e?(0,d.localize)("Manage account"):(0,d.localize)("Add or manage account")}},{body:function(e){return o.createElement(it,{prev:e.state_value.previous_currency,current:e.state_value.current_currency,onCancel:D,onSubmit:I})},title:function(){return(0,d.localize)("Add or manage account")}},{body:function(e){return o.createElement(zt,{currency:e.state_value.currency,closeModal:D})}},{body:function(e){return o.createElement(rt,{is_loading:e.is_loading,setLoading:j,onError:P,onClose:D,onSuccessSetAccountCurrency:M})},title:Pt},{body:function(e){return o.createElement(dt,{message:e.state_value.error_message,code:e.state_value.error_code,onConfirm:L})},title:function(){return(0,d.localize)("Add a real account")}}]),1)[0],k=function(e){p({active_modal_index:It,currency:e})},T=function(e){t(),setTimeout((function(){y({is_visible:!0,should_persist:!0})}),300),p({currency:e})},I=function(){t(),a.push(_.routes.cashier_deposit)},M=function(e,t){p({previous_currency:e,current_currency:t,active_modal_index:Tt})},j=function(e){z(e)},P=function(e,t){var n;t&&function(e){localStorage.setItem("real_account_signup_wizard",JSON.stringify(e.map((function(e){return"object"===Ot(e.form_value)&&e.form_value}))))}(t),E(null===(n=x[R()])||void 0===n?void 0:n.action),N(e)};o.useEffect((function(){C&&p({active_modal_index:jt,error_message:C.message,error_code:C.code})}),[C]);var D=function(e){"noopener noreferrer"===(null==e?void 0:e.target.getAttribute("rel"))||null!=e&&e.target.closest(".redirect-notice")||null!=e&&e.target.closest(".dc-popover__bubble")||(R()!==It&&(sessionStorage.removeItem("post_real_account_signup"),localStorage.removeItem("real_account_signup_wizard")),t(),(0,_.isNavigationFromPlatform)(f,_.routes.smarttrader)&&(window.location=_.routes.smarttrader))},L=function(){p({active_modal_index:"multi"===v?kt:xt})},R=function(){return-1===h.active_modal_index?r&&n&&"manage"===m?kt:n?xt:Mt:h.active_modal_index},F=x[R()],W=F.title,U=F.body,B=Tt,$=It,Z=jt,V=[xt,kt,Mt,Z].includes(R());return o.createElement(o.Fragment,null,o.createElement(u.DesktopWrapper,null,o.createElement(u.Modal,{id:"real_account_signup_modal",className:A()("real-account-signup-modal",{"dc-modal__container_real-account-signup-modal--error":R()===Z,"dc-modal__container_real-account-signup-modal--success":[B,$].includes(R())}),is_open:s,has_close_icon:"samoa"!==m,is_title_centered:"samoa"===m,renderTitle:function(){return W&&![B,$].includes(R())?o.createElement(W,{real_account_signup_target:m,currency:n,is_isle_of_man_residence:c,is_belgium_residence:i,is_eu:l}):null},toggleModal:D,height:R()===It?"auto":n?r&&n?l&&R()===kt?"420px":R()===Tt?"auto":"644px":"740px":"688px",width:V?"904px":"auto"},s&&o.createElement(U,{state_value:h,passthrough:g,is_loading:S}))),o.createElement(u.MobileWrapper,null,o.createElement(u.MobileDialog,{portal_element_id:"modal_root",wrapper_classname:"account-signup-mobile-dialog",visible:s,onClose:D,renderTitle:function(){return W?o.createElement(W,{real_account_signup_target:m,currency:n,is_isle_of_man_residence:c,is_belgium_residence:i}):null}},o.createElement(U,{state_value:h,passthrough:g,is_loading:S}))))})));var Lt=function(e){var t=e.is_visible,n=e.is_virtual,r=e.setCurrency,a=e.toggleModal;return o.createElement(u.Modal,{id:"dt_set_account_currency_modal",has_close_icon:!1,is_open:t,small:!0,toggleModal:a,title:(0,d.localize)("You have an account that needs action")},o.createElement(u.Modal.Body,null,(0,d.localize)("Please set a currency for your existing real account before creating another account.")),o.createElement(u.Modal.Footer,null,n?o.createElement(u.Button,{has_effect:!0,text:(0,d.localize)("OK"),onClick:a,primary:!0}):o.createElement(o.Fragment,null,o.createElement(u.Button,{has_effect:!0,text:(0,d.localize)("Cancel"),onClick:a,secondary:!0}),o.createElement(u.Button,{has_effect:!0,text:(0,d.localize)("Set currency"),onClick:function(){a(),setTimeout((function(){r()}),250)},primary:!0}))))};Lt.propTypes={is_virtual:a().bool,is_visible:a().bool,setCurrency:a().func,toggleModal:a().func};const Rt=(0,g.$j)((function(e){var t=e.client,n=e.ui;return{is_virtual:t.is_virtual,toggleModal:n.toggleSetCurrencyModal,setCurrency:n.openRealAccountSignup,is_visible:n.is_set_currency_modal_visible}}))(Lt);const Ft=function(e){var t=e.onUpdate;return o.useEffect((function(){var e=function(){document.removeEventListener("UpdateAvailable",t)},n=function(){document.addEventListener("UpdateAvailable",t)};return document.addEventListener("UpdateAvailable",t),document.addEventListener("IgnorePWAUpdate",e),document.addEventListener("ListenPWAUpdate",n),function(){document.removeEventListener("IgnorePWAUpdate",e),document.removeEventListener("ListenPWAUpdate",n),document.removeEventListener("UpdateAvailable",t)}}),[]),null};var Wt=n(57798),Ut=n(95857),Bt=n(37781),$t=function(e){var t,n=e.acc_switcher_disabled_message,r=e.account_status,a=e.addNotificationMessage,i=e.should_allow_authentication,c=e.app_routing_history,l=e.balance,s=e.currency,d=e.disableApp,m=e.enableApp,f=e.header_extension,p=e.history,g=e.is_acc_switcher_disabled,h=e.is_acc_switcher_on,y=e.is_app_disabled,b=e.is_dark_mode,v=e.is_logged_in,E=e.is_logging_in,w=e.is_mt5_allowed,S=e.is_notifications_visible,z=e.is_p2p_enabled,O=e.is_payment_agent_transfer_visible,C=e.is_onramp_tab_visible,N=e.is_payment_agent_visible,x=e.is_route_modal_on,k=e.is_virtual,T=e.location,I=e.logoutClient,M=e.menu_items,j=e.needs_financial_assessment,P=e.notifications_count,D=e.openRealAccountSignup,L=e.removeNotificationMessage,R=e.setDarkMode,F=e.toggleAccountsDialog,W=e.toggleNotifications,U=o.useRef(null),B=o.useCallback((function(){return L({key:"new_version_available"})}),[L]);o.useEffect((function(){return document.addEventListener("IgnorePWAUpdate",B),function(){return document.removeEventListener("IgnorePWAUpdate",B)}}),[B]);var $=function(e){return e.filter((function(e){return e.link_to!==_.routes.mt5||(!v||w)}))};return o.createElement("header",{className:A()("header",{"header--is-disabled":y||x})},o.createElement("div",{className:"header__menu-items"},o.createElement("div",{className:"header__menu-left"},o.createElement(u.DesktopWrapper,null,o.createElement(Z.Ls,{app_routing_history:c,platform_config:$(V)})),o.createElement(u.MobileWrapper,null,o.createElement(Ut.Z,{ref:U,should_allow_authentication:i,account_status:r,enableApp:m,disableApp:d,location:T,logoutClient:I,is_dark_mode:b,is_logged_in:v,is_p2p_enabled:z,is_payment_agent_transfer_visible:O,is_onramp_tab_visible:C,is_payment_agent_visible:N,is_virtual:k,needs_financial_assessment:j,toggleTheme:R,platform_header:(0,_.getPlatformInformation)(c).header,platform_switcher:o.createElement(Z.Ls,{app_routing_history:c,is_mobile:!0,platform_config:$(V),toggleDrawer:null===(t=U.current)||void 0===t?void 0:t.toggleDrawer})}),f&&v&&o.createElement("div",{className:"header__menu-left-extensions"},f)),o.createElement(Z.IV,{is_logged_in:v,items:M})),o.createElement("div",{className:A()("header__menu-right",{"header__menu-right--hidden":(0,_.isMobile)()&&E})},E&&o.createElement("div",{className:A()("acc-info__preloader",{"acc-info__preloader--no-currency":!s,"acc-info__preloader--is-crypto":(0,_.getDecimalPlaces)(s)>2})},o.createElement(Bt.vN,{is_logged_in:v,is_mobile:(0,_.isMobile)(),speed:3})),o.createElement("div",{className:"acc-info__container"},o.createElement(Z.bF,{acc_switcher_disabled_message:n,balance:l,currency:s,disableApp:d,enableApp:m,is_acc_switcher_on:h,is_acc_switcher_disabled:g,is_notifications_visible:S,is_logged_in:v,is_virtual:k,onClickDeposit:function(){return p.push(_.routes.cashier_deposit)},notifications_count:P,toggleAccountsDialog:F,toggleNotifications:W,openRealAccountSignup:D})))),o.createElement(Dt,null),o.createElement(Rt,null),o.createElement(Ft,{onUpdate:function(){return a((0,Wt.G$)().new_version_available)}}))};$t.propTypes={acc_switcher_disabled_message:a().string,should_allow_authentication:a().bool,account_status:a().object,addNotificationMessage:a().func,app_routing_history:a().array,balance:a().string,currency:a().string,disableApp:a().func,enableApp:a().func,header_extension:a().any,is_acc_switcher_disabled:a().bool,is_acc_switcher_on:a().bool,is_app_disabled:a().bool,is_dark_mode:a().bool,is_loading:a().bool,is_logged_in:a().bool,is_logging_in:a().bool,is_mt5_allowed:a().bool,is_notifications_visible:a().bool,is_route_modal_on:a().bool,is_virtual:a().bool,logoutClient:a().func,needs_financial_assessment:a().bool,notifications_count:a().number,openRealAccountSignup:a().func,removeNotificationMessage:a().func,setDarkMode:a().func,toggleAccountsDialog:a().func,toggleNotifications:a().func};const Zt=(0,g.$j)((function(e){var t=e.client,n=e.common,r=e.ui,a=e.menu,o=e.modules;return{acc_switcher_disabled_message:r.account_switcher_disabled_message,account_status:t.account_status,should_allow_authentication:t.should_allow_authentication,addNotificationMessage:r.addNotificationMessage,app_routing_history:n.app_routing_history,balance:t.balance,currency:t.currency,disableApp:r.disableApp,enableApp:r.enableApp,header_extension:r.header_extension,is_acc_switcher_disabled:r.is_account_switcher_disabled,is_acc_switcher_on:!!r.is_accounts_switcher_on,is_app_disabled:r.is_app_disabled,is_dark_mode:r.is_dark_mode_on,is_loading:r.is_loading,is_logged_in:t.is_logged_in,is_logging_in:t.is_logging_in,is_mt5_allowed:t.is_mt5_allowed,is_notifications_visible:r.is_notifications_visible,is_p2p_enabled:o.cashier.is_p2p_enabled,is_payment_agent_transfer_visible:o.cashier.is_payment_agent_transfer_visible,is_onramp_tab_visible:o.cashier.onramp.is_onramp_tab_visible,is_payment_agent_visible:o.cashier.is_payment_agent_visible,is_route_modal_on:r.is_route_modal_on,is_virtual:t.is_virtual,logoutClient:t.logout,menu_items:a.extensions,needs_financial_assessment:t.needs_financial_assessment,notifications_count:r.filtered_notifications.length,openRealAccountSignup:r.openRealAccountSignup,removeNotificationMessage:r.removeNotificationMessage,setDarkMode:r.setDarkMode,toggleAccountsDialog:r.toggleAccountsDialog,toggleNotifications:r.toggleNotificationsModal}}))((0,z.withRouter)($t));var Vt=n(32577),Yt=function(){return o.createElement("div",{className:"dashboard-platform-header__divider"})},Ht=function(){var e=(0,z.useHistory)();return o.createElement("div",{className:"dashboard-platform-header__my-apps",onClick:function(){return e.push(_.routes.dashboard)}},o.createElement(u.Icon,{icon:"IcWalletMyApps",size:16}),o.createElement(u.Text,{size:"s",line_height:"xxl",weight:"bold",className:"dashboard-platform-header__my-apps--title"},(0,d.localize)("My apps")),o.createElement(Yt,null))},Gt=function(e){var t=e.app_routing_history;return o.createElement("div",{className:"dashboard-platform-header__platform-information"},o.createElement(u.Icon,{className:"dashboard-platform-header__platform-information--icon",icon:(0,_.getPlatformInformation)(t).icon,size:24}),o.createElement(u.Text,{size:"s",weight:"bold",line_height:"xxl"},(0,_.getPlatformInformation)(t).header))},Xt=function(){return o.createElement("div",{className:"dashboard-platform-header__report"},o.createElement(Vt.CG,{id:"db_reports_tab",key:"db_reports_tab",to:_.routes.reports},o.createElement(u.Icon,{icon:"IcReports",size:20})))},Kt=function(e){var t=e.is_notifications_visible,n=e.notifications_count,r=e.toggleNotifications;return o.createElement("div",{className:"dashboard-platform-header__notification"},o.createElement(Z.Rv,{count:n,is_visible:t,toggleDialog:r,tooltip_message:o.createElement(d.Localize,{i18n_default_text:"View notifications"})}))},qt=function(e){var t=e.toggleSettings;return o.createElement("div",{className:"dashboard-platform-header__setting"},o.createElement(u.Popover,{alignment:"top"},o.createElement("a",{id:"dt_settings_toggle",onClick:t,className:"dashboard-platform-header__setting--icon"},o.createElement(u.Icon,{icon:"IcGearLight",size:22}))))},Jt=function(e){var t=e.balance,n=e.currency;return o.createElement("div",{className:"dashboard-platform-header__balance"},o.createElement(Yt,null),o.createElement(u.Icon,{icon:"IcWalletDerivApps",size:28,className:"dashboard-platform-header__balance--icon"}),o.createElement(u.Text,{size:"s",line_height:"xxl",weight:"bold",color:"profit-success"},o.createElement(u.Money,{amount:t,currency:n,show_currency:!0})))},Qt=function(e){var t,n,r=e.account_status,a=e.app_routing_history,i=e.balance,c=e.currency,l=e.disableApp,s=e.enableApp,m=e.header_extension,f=e.is_dark_mode,p=e.is_logged_in,g=e.is_mt5_allowed,h=e.is_notifications_visible,y=e.is_onramp_tab_visible,b=e.is_p2p_enabled,v=e.is_payment_agent_transfer_visible,E=e.is_payment_agent_visible,w=e.is_settings_modal_on,S=e.is_virtual,A=e.location,O=e.logoutClient,C=e.needs_financial_assessment,N=e.notifications_count,x=e.setDarkMode,k=e.settings_extension,T=e.should_allow_authentication,I=e.toggleNotifications,M=e.toggleSettingsModal,j=o.useRef(null),P=(0,z.useHistory)();return o.createElement("header",{className:"dashboard-platform-header"},o.createElement("div",{className:"dashboard-platform-header__menu-left"},o.createElement(u.MobileWrapper,null,o.createElement(Ut.Z,{ref:j,should_allow_authentication:T,account_status:r,enableApp:s,disableApp:l,location:A,logoutClient:O,is_dark_mode:f,is_logged_in:p,is_p2p_enabled:b,is_payment_agent_transfer_visible:v,is_onramp_tab_visible:y,is_payment_agent_visible:E,is_virtual:S,needs_financial_assessment:C,toggleTheme:x,platform_header:(0,_.getPlatformInformation)(a).header,platform_switcher:o.createElement(Z.Ls,{app_routing_history:a,is_mobile:!0,platform_config:(n=V,n.filter((function(e){return e.link_to!==_.routes.mt5||!p||g}))),toggleDrawer:null===(t=j.current)||void 0===t?void 0:t.toggleDrawer})}),m&&p&&o.createElement("div",null,m)),o.createElement(u.DesktopWrapper,null,o.createElement(Ht,null),o.createElement(Gt,{app_routing_history:a}))),o.createElement("div",{className:"dashboard-platform-header__menu-right"},o.createElement(u.DesktopWrapper,null,o.createElement(Xt,null)),o.createElement(Kt,{is_notifications_visible:h,notifications_count:N,toggleNotifications:I}),o.createElement(u.DesktopWrapper,null,o.createElement(qt,{disableApp:l,enableApp:s,is_settings_modal_on:w,toggleSettingsModal:M,settings_extension:k})),o.createElement(Jt,{balance:i,currency:c}),o.createElement(u.Button,{small:(0,_.isMobile)(),has_effect:!0,text:(0,d.localize)("Top up"),onClick:function(){return P.push(_.routes.dashboard)},primary:!0,className:"dashboard-platform-header__button"})))};Qt.propTypes={account_status:a().object,app_routing_history:a().array,balance:a().oneOfType([a().number,a().string]),currency:a().string,disableApp:a().func,enableApp:a().func,header_extension:a().any,is_dark_mode:a().bool,is_logged_in:a().bool,is_mt5_allowed:a().bool,is_notifications_visible:a().bool,is_onramp_tab_visible:a().bool,is_p2p_enabled:a().bool,is_payment_agent_transfer_visible:a().bool,is_payment_agent_visible:a().bool,is_virtual:a().bool,logoutClient:a().func,needs_financial_assessment:a().bool,notifications_count:a().number,setDarkMode:a().func,should_allow_authentication:a().bool,toggleNotifications:a().func};const en=(0,g.$j)((function(e){var t=e.client,n=e.common,r=e.modules,a=e.ui;return{account_status:t.account_status,app_routing_history:n.app_routing_history,balance:t.balance,currency:t.currency,disableApp:a.disableApp,enableApp:a.enableApp,header_extension:a.header_extension,is_dark_mode:a.is_dark_mode_on,is_logged_in:t.is_logged_in,is_mt5_allowed:t.is_mt5_allowed,is_notifications_visible:a.is_notifications_visible,is_onramp_tab_visible:r.cashier.onramp.is_onramp_tab_visible,is_p2p_enabled:r.cashier.is_p2p_enabled,is_payment_agent_transfer_visible:r.cashier.is_payment_agent_transfer_visible,is_payment_agent_visible:r.cashier.is_payment_agent_visible,is_virtual:t.is_virtual,logoutClient:t.logout,needs_financial_assessment:t.needs_financial_assessment,notifications_count:a.filtered_notifications.length,setDarkMode:a.setDarkMode,should_allow_authentication:t.should_allow_authentication,toggleNotifications:a.toggleNotificationsModal}}))((0,z.withRouter)(Qt));var tn=n(50483),nn=n(6591),rn=n(83170),an=n(10142),on=n(32682),cn=n(2362),ln=n(33192),sn=n(37672),un=function(e){var t=e.is_dark_mode,n=(0,z.useHistory)();return o.createElement("header",{className:"dashboard-header dashboard-header--logged-in"},o.createElement("div",{className:"dashboard-header__left"},o.createElement("div",{onClick:function(){return n.push(_.routes.dashboard)}},(0,_.isDesktop)()?t?o.createElement(on.Z,null):o.createElement(an.Z,null):t?o.createElement(ln.Z,null):o.createElement(cn.Z,null))),o.createElement("div",{className:"dashboard-header__right--logged-in"},(0,_.isDesktop)()?o.createElement(o.Fragment,null,o.createElement(u.Icon,{icon:"IcProfile",size:32,className:"dashboard-header__right--logged-in-icon"}),o.createElement(u.Icon,{icon:"IcNotification",size:32})):o.createElement(o.Fragment,null,o.createElement(u.Icon,{icon:"IcNotificationClear",height:20,width:17}),o.createElement("div",{className:"dashboard-header__right--logged-in-separator"}),o.createElement(u.Icon,{icon:"IcHamburger",className:"dashboard-header__right-hamburger",size:16}))))},_n=function(){var e=(0,z.useHistory)(),t=o.useContext(_.PlatformContext).is_deriv_crypto;return o.createElement("header",{className:"dashboard-header dashboard-header--logged-out"},o.createElement("div",{className:"dashboard-header__left"},o.createElement("div",{onClick:function(){return e.push(_.routes.dashboard)}},(0,_.isDesktop)()?o.createElement(o.Fragment,null,o.createElement(tn.Z,{className:"dashboard-header__left--desktop-logo"}),o.createElement(nn.Z,null)):o.createElement(rn.Z,null))),o.createElement("div",{className:"dashboard-header__middle--logged-out"},o.createElement(u.Text,{color:"colored-background",size:"s",onClick:function(){return e.push(_.routes.explore)}},(0,d.localize)("Explore")),o.createElement(u.Text,{color:"colored-background",size:"s",onClick:function(){return e.push(_.routes.about_us)}},(0,d.localize)("About us")),o.createElement(u.Text,{color:"colored-background",size:"s",onClick:function(){return e.push(_.routes.resources)}},(0,d.localize)("Resources"))),o.createElement("div",{className:"dashboard-header__right--logged-out"},o.createElement(u.Button.Group,null,o.createElement(u.Button,{alternate:!0,has_effect:!0,text:(0,d.localize)("Log in"),onClick:function(){return(0,_.redirectToLogin)(!1,(0,d.getLanguage)())}}),o.createElement(u.Button,{className:"dashboard-header__right--create-button",primary:!0,text:(0,d.localize)("Create free demo account"),onClick:function(){return(0,_.redirectToSignUp)({is_deriv_crypto:t})}})),(0,_.isMobile)()&&o.createElement(o.Fragment,null,o.createElement("div",{className:"dashboard-header__right--logged-out-separator"}),o.createElement(u.Icon,{icon:"IcHamburgerWhite",className:"dashboard-header__right-hamburger",width:12,height:10}))))},dn=function(){return o.createElement("div",{className:"dashboard-header__preloader"},o.createElement(sn.Z,{speed:3}))},mn=function(e){var t=e.is_dark_mode,n=e.is_logged_in;return e.is_logging_in?o.createElement(dn,null):n?o.createElement(un,{is_dark_mode:t}):o.createElement(_n,null)};mn.propTypes={is_dark_mode:a().bool,is_logged_in:a().bool,is_logging_in:a().bool};const fn=(0,g.$j)((function(e){var t=e.client;return{is_dark_mode:e.ui.is_dark_mode_on,is_logged_in:t.is_logged_in,is_logging_in:t.is_logging_in}}))(mn);const pn=function(){return o.useContext(_.PlatformContext).is_dashboard?/myapps.deriv/.test(window.location.pathname)?o.createElement(en,null):o.createElement(fn,null):o.createElement(Zt,null)};var gn=n(81472),hn=n(4390),yn=n(24387);function bn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var En=function(e){var t=e.children;return(0,_.isMobile)()?i.createPortal(t,document.getElementById("deriv_app")):t},wn=function(e){var t=e.style,n=e.notifications,r=e.removeNotificationMessage;return o.createElement("div",{className:"notification-messages",style:t},o.createElement(gn.Z,{component:"div"},n.map((function(e,t){return o.createElement(hn.Z,{appear:!0,key:t,in:!!e.header,timeout:150,classNames:{appear:"notification--enter",enter:"notification--enter",enterDone:"notification--enter-done",exit:"notification--exit"},unmountOnExit:!0},o.createElement(yn.ZP,{data:e,removeNotificationMessage:r}))}))))},Sn=function(e){var t=e.marked_notifications,n=e.notification_messages,r=e.removeNotificationMessage,a=bn(o.useState({}),2),i=a[0],c=a[1],l=o.createRef();o.useEffect((function(){var e;if(null!==(e=l.current)&&void 0!==e&&e.parentElement&&(0,_.isMobile)()){var t=l.current.parentElement.getBoundingClientRect();c({top:t.top+8})}}),[]);var s=n.filter((function(e){return!t.includes(e.key)&&(!(0,_.isMobile)()||["unwelcome","contract_sold","dp2p","tnc"].includes(e.key))})).slice(0,(0,_.isMobile)()?yn.fh:yn.S_);return s.length?o.createElement("div",{ref:l,className:"notification-messages-bounds"},o.createElement(En,null,o.createElement(wn,{notifications:s,style:i,removeNotificationMessage:r}))):null};Sn.propTypes={marked_notifications:a().array,notification_messages:a().arrayOf(a().shape({closeOnClick:a().func,delay:a().number,header:a().string,is_auto_close:a().bool,message:a().oneOfType([a().node,a().string]),size:a().oneOf(["small"]),type:a().oneOf(["warning","info","success","danger","contract_sold","news","announce"])})),removeNotificationMessage:a().func};const An=(0,g.$j)((function(e){var t=e.ui;return{marked_notifications:t.marked_notifications,notification_messages:t.notification_messages,removeNotificationMessage:t.removeNotificationMessage}}))(Sn);var zn=n(240),On=o.lazy((function(){return n.e(301).then(n.bind(n,91798))})),Cn=o.lazy((function(){return n.e(871).then(n.bind(n,3347))})),Nn=o.lazy((function(){return n.e(871).then(n.bind(n,39692))})),xn=o.lazy((function(){return n.e(530).then(n.bind(n,69930))})),kn=o.lazy((function(){return n.e(0).then(n.bind(n,72791))})),Tn=o.lazy((function(){return n.e(424).then(n.bind(n,44084))})),In=o.lazy((function(){return n.e(30).then(n.bind(n,13590))}));const Mn=(0,g.$j)((function(e){var t=e.client,n=e.ui;return{is_account_types_modal_visible:n.is_account_types_modal_visible,is_welcome_modal_visible:n.is_welcome_modal_visible,is_account_needed_modal_on:n.is_account_needed_modal_on,is_set_residence_modal_visible:n.is_set_residence_modal_visible,is_real_acc_signup_on:n.is_real_acc_signup_on,is_reality_check_visible:t.is_reality_check_visible}}))((function(e){var t=e.is_account_needed_modal_on,n=e.is_account_types_modal_visible,r=e.is_welcome_modal_visible,a=e.is_reality_check_visible,i=e.is_set_residence_modal_visible,c=null;switch(new URLSearchParams((0,z.useLocation)().search).get("action")){case"redirect_to_login":c=o.createElement(Nn,null);break;case"reset_password":c=o.createElement(Cn,null);break;case"signup":c=o.createElement(On,null);break;default:i&&(c=o.createElement(xn,null))}return n&&(c=o.createElement(Tn,null)),r&&(c=o.createElement(In,null)),t&&(c=o.createElement(zn.Z,null)),a&&(c=o.createElement(kn,null)),c?o.createElement(o.Suspense,{fallback:o.createElement("div",null)},c):null}));var jn=n(16),Pn=n(23942);function Dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(n),!0).forEach((function(t){Rn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fn=n.n(Pn)()({loader:function(){return Promise.resolve().then(n.bind(n,62792))},loading:u.UILoader,render:function(e,t){var n=e.default;return o.createElement(n,t)}}),Wn=function(e){var t=e.addRouteHistoryItem,n=e.error,r=e.has_error,a=e.history,i=e.is_logged_in,c=e.is_logging_in,l=e.location,s=e.passthrough,u=e.setAppRouterHistory,m=e.setInitialRouteHistoryItem,f=o.useRef(null),p=o.useRef(null);o.useEffect((function(){return p.current||f.current||(f.current=l.pathname),m(a.location),p.current=a.listen((function(e,n){["PUSH","POP"].includes(n)&&t(Ln(Ln({},e),{},{action:n}))})),u(a),function(){"function"==typeof p.current&&(p.current(),p.current=null,f.current=null)}}),[]);var g=(0,d.getLanguage)();return r?o.createElement(Fn,n):(/[?&]lang=/.test(l.search)||"EN"===g||window.history.replaceState({},document.title,(0,_.urlForLanguage)(g)),o.createElement(Vt.ZP,{is_logged_in:i,is_logging_in:c,passthrough:s}))};Wn.propTypes={addRouteHistoryItem:a().func,error:jn.PropTypes.objectOrObservableObject,has_error:a().bool,history:a().object,is_logged_in:a().bool,is_logging_in:a().bool,is_virtual:a().bool,setAppRouterHistory:a().func,setInitialRouteHistoryItem:a().func};const Un=(0,z.withRouter)((0,g.$j)((function(e){var t=e.client,n=e.common;return{is_logged_in:t.is_logged_in,is_logging_in:t.is_logging_in,error:n.error,has_error:n.has_error,setAppRouterHistory:n.setAppRouterHistory,addRouteHistoryItem:n.addRouteHistoryItem,setInitialRouteHistoryItem:n.setInitialRouteHistoryItem}}))(Wn));var Bn=n(59001),$n=n(28284),Zn=n(18880);(0,Bn.configure)({enforceActions:"observed"});const Vn=function(e){var t=new Zn.Z;return function(e){window.addEventListener("storage",(function(t){switch(t.key){case"active_loginid":document.hidden&&window.location.reload();break;case"reality_check_dismissed":document.hidden&&e.client.setVisibilityRealityCheck(!JSON.parse(t.newValue))}}))}(t),$n.Z.init(t),t.client.init(),t.ui.init(e),t.pushwoosh.init(),t};var Yn=n(74495),Hn=n(89160);function Gn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Kn=function(){Jn.modules.attachModule("cashier",new(f())({root_store:Jn,WS:p.Z}))},qn=function(e){var t=e.root_store,n=window.location,r=n.pathname.split("/")[1],a=/^\/(br_)/.test(n.pathname),i=Gn((0,d.useOnLoadTranslation)(),1)[0];o.useEffect(Kn,[]),o.useEffect((function(){(0,_.checkAndSetEndpointFromUrl)(),(0,d.initializeTranslations)(),(0,_.setUrlLanguage)((0,d.getLanguage)()),(0,_.initFormErrorMessages)(Yn.U),(0,_.setSharedMT5Text)(Hn.r)}),[]);var l=o.useCallback((function(){if((0,_.isTouchDevice)()&&(0,_.isMobile)()){var e="Android"===(0,_.mobileOSDetect)(),n=e?screen.availWidth:window.innerWidth,r=e?screen.availHeight:window.innerHeight,a=document.getElementById("landscape_blocker");n<=r?(t.ui.onOrientationChange({is_landscape_orientation:!1}),a.classList.remove("landscape-blocker--visible")):(t.ui.onOrientationChange({is_landscape_orientation:!0}),a.classList.add("landscape-blocker--visible"))}}),[t.ui]);o.useEffect((function(){var e=s()(l,400);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[l]);var m={root_store:t,WS:p.Z};return o.createElement(o.Fragment,null,i?o.createElement(c.BrowserRouter,{basename:a?"/".concat(r):null},o.createElement(g.z1,{store:t},o.createElement(D,null,o.createElement(pn,null),o.createElement(w.Z,null,o.createElement(I,null,o.createElement(Un,{passthrough:m}))),o.createElement(u.DesktopWrapper,null,o.createElement($,null)),o.createElement(Mn,null),o.createElement(h.Z,null),o.createElement(E,null)))):o.createElement(o.Fragment,null))};qn.propTypes={root_store:a().object};var Jn=Vn(An),Qn=document.getElementById("deriv_app");Qn&&i.render(o.createElement(qn,{root_store:Jn}),Qn)}}]);