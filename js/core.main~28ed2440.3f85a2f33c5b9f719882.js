(self.webpackChunk=self.webpackChunk||[]).push([[2745],{39402:(t,e,o)=>{"use strict";o.d(e,{Z:()=>M});var r,n,i,c,s,a,u,p,l,y,_,h,d,g,f,b,m,v,w,O,k,S,P=o(59001),j=o(48680),D=o(58147);function A(t,e,o,r,n,i,c){try{var s=t[i](c),a=s.value}catch(t){return void o(t)}s.done?e(a):Promise.resolve(a).then(r,n)}function R(t){return function(){var e=this,o=arguments;return new Promise((function(r,n){var i=t.apply(e,o);function c(t){A(i,r,n,c,s,"next",t)}function s(t){A(i,r,n,c,s,"throw",t)}c(void 0)}))}}function L(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function x(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?L(Object(o),!0).forEach((function(e){z(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):L(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function z(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function C(t,e,o,r){o&&Object.defineProperty(t,e,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}function I(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function T(t,e,o,r,n){var i={};return Object.keys(r).forEach((function(t){i[t]=r[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=o.slice().reverse().reduce((function(o,r){return r(t,e,o)||o}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var M=(r=P.action.bound,n=P.action.bound,i=P.action.bound,c=P.action.bound,s=P.action.bound,a=P.action.bound,u=P.action.bound,p=P.action.bound,l=P.action.bound,y=P.action.bound,_=P.action.bound,h=P.action.bound,d=P.action.bound,g=P.action.bound,f=P.action.bound,b=P.action.bound,S=k=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};I(this,t),C(this,"validation_errors",v,this),C(this,"validation_rules",w,this),this.preSwitchAccountDisposer=null,this.pre_switch_account_listener=null,this.switchAccountDisposer=null,this.switch_account_listener=null,this.logoutDisposer=null,this.logout_listener=null,this.clientInitDisposer=null,this.client_init_listener=null,this.networkStatusChangeDisposer=null,this.network_status_change_listener=null,this.themeChangeDisposer=null,this.theme_change_listener=null,this.realAccountSignupEndedDisposer=null,this.real_account_signup_ended_listener=null,C(this,"partial_fetch_time",O,this);var o=e.root_store,r=e.local_storage_properties,n=e.session_storage_properties,i=e.validation_rules,c=e.store_name;Object.defineProperty(this,"root_store",{enumerable:!1,writable:!0}),Object.defineProperty(this,"local_storage_properties",{enumerable:!1,writable:!0}),Object.defineProperty(this,"session_storage_properties",{enumerable:!1,writable:!0});var s=r&&r.length||n&&n.length;if(s){if(!c)throw new Error("store_name is required for local/session storage");Object.defineProperty(this,"store_name",{value:c,enumerable:!1,writable:!1})}this.root_store=o,this.local_storage_properties=r||[],this.session_storage_properties=n||[],this.setValidationRules(i),this.setupReactionForLocalStorage(),this.setupReactionForSessionStorage(),this.retrieveFromStorage()}var e,o,r;return e=t,(o=[{key:"getSnapshot",value:function(t){var e=(0,P.toJS)(this);return(0,j.isEmptyObject)(this.root_store)||(e.root_store=this.root_store),t&&t.length&&(e=t.reduce((function(t,o){return Object.assign(t,z({},o,e[o]))}),{})),e}},{key:"setupReactionForLocalStorage",value:function(){var e=this;this.local_storage_properties.length&&(0,P.reaction)((function(){return e.local_storage_properties.map((function(t){return e[t]}))}),(function(){return e.saveToStorage(e.local_storage_properties,t.STORAGES.LOCAL_STORAGE)}))}},{key:"setupReactionForSessionStorage",value:function(){var e=this;this.session_storage_properties.length&&(0,P.reaction)((function(){return e.session_storage_properties.map((function(t){return e[t]}))}),(function(){return e.saveToStorage(e.session_storage_properties,t.STORAGES.SESSION_STORAGE)}))}},{key:"saveToStorage",value:function(e,o){var r=JSON.stringify(this.getSnapshot(e),(function(t,e){if(null!==e)return e}));o===t.STORAGES.LOCAL_STORAGE?localStorage.setItem(this.store_name,r):o===t.STORAGES.SESSION_STORAGE&&sessionStorage.setItem(this.store_name,r)}},{key:"retrieveFromStorage",value:function(){var t=this,e=JSON.parse(localStorage.getItem(this.store_name,{})),o=JSON.parse(sessionStorage.getItem(this.store_name,{})),r=x(x({},e),o);Object.keys(r).forEach((function(e){return t[e]=r[e]}))}},{key:"setValidationErrorMessages",value:function(t,e){var o=this;this.validation_errors[t]&&!o.validation_errors[t].filter((function(t){return!e.includes(t)})).concat(e.filter((function(e){return!o.validation_errors[t].includes(e)}))).length||(this.validation_errors[t]=e)}},{key:"setValidationRules",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(e).forEach((function(o){t.addRule(o,e[o])}))}},{key:"addRule",value:function(t,e){var o=this;this.validation_rules[t]=e,(0,P.intercept)(this,t,(function(e){return o.validateProperty(t,e.newValue),e}))}},{key:"validateProperty",value:function(t,e){var o=this,r=this.validation_rules[t].trigger,n=z({},t,void 0!==e?e:this[t]),i=z({},t,this.validation_rules[t].rules||[]);r&&Object.hasOwnProperty.call(this,r)&&(n[r]=this[r],i[r]=this.validation_rules[r].rules||[]);var c=new D.Z(n,i,this);c.isPassed(),Object.keys(n).forEach((function(t){o.setValidationErrorMessages(t,c.errors.get(t))}))}},{key:"validateAllProperties",value:function(){var t=this,e=Object.keys(this.validation_rules),o=Object.keys(this.validation_errors);e.forEach((function(e){t.validateProperty(e,t[e])})),o.forEach((function(o){e.includes(o)||delete t.validation_errors[o]}))}},{key:"onSwitchAccount",value:function(t){var e=this;t&&(this.switch_account_listener=t,this.switchAccountDisposer=(0,P.when)((function(){return e.root_store.client.switch_broadcast}),R(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(o=e.switch_account_listener())||!o.then||"function"!=typeof o.then){t.next=6;break}o.then((function(){e.root_store.client.switchEndSignal(),e.onSwitchAccount(e.switch_account_listener)})),t.next=7;break;case 6:throw new Error("Switching account listeners are required to return a promise.");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,j.isProduction)()||console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))))}},{key:"onPreSwitchAccount",value:function(t){var e=this;t&&(this.pre_switch_account_listener=t,this.preSwitchAccountDisposer=(0,P.when)((function(){return e.root_store.client.pre_switch_broadcast}),R(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(o=e.pre_switch_account_listener())||!o.then||"function"!=typeof o.then){t.next=6;break}o.then((function(){e.root_store.client.setPreSwitchAccount(!1),e.onPreSwitchAccount(e.pre_switch_account_listener)})),t.next=7;break;case 6:throw new Error("Pre-switch account listeners are required to return a promise.");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,j.isProduction)()||console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))))}},{key:"onLogout",value:function(t){var e=this;this.logoutDisposer=(0,P.when)((function(){return e.root_store.client.has_logged_out}),R(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(o=e.logout_listener())||!o.then||"function"!=typeof o.then){t.next=6;break}o.then((function(){e.root_store.client.setLogout(!1),e.onLogout(e.logout_listener)})),t.next=7;break;case 6:throw new Error("Logout listeners are required to return a promise.");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,j.isProduction)()||console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))),this.logout_listener=t}},{key:"onClientInit",value:function(t){var e=this;this.clientInitDisposer=(0,P.when)((function(){return e.root_store.client.initialized_broadcast}),R(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(o=e.client_init_listener())||!o.then||"function"!=typeof o.then){t.next=6;break}o.then((function(){e.root_store.client.setInitialized(!1),e.onClientInit(e.client_init_listener)})),t.next=7;break;case 6:throw new Error("Client init listeners are required to return a promise.");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,j.isProduction)()||console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))),this.client_init_listener=t}},{key:"onNetworkStatusChange",value:function(t){var e=this;this.networkStatusChangeDisposer=(0,P.reaction)((function(){return e.root_store.common.is_network_online}),(function(t){try{e.network_status_change_listener(t)}catch(t){(0,j.isProduction)()||console.error(t)}})),this.network_status_change_listener=t}},{key:"onThemeChange",value:function(t){var e=this;this.themeChangeDisposer=(0,P.reaction)((function(){return e.root_store.ui.is_dark_mode_on}),(function(t){try{e.theme_change_listener(t)}catch(t){(0,j.isProduction)()||console.error(t)}})),this.theme_change_listener=t}},{key:"onRealAccountSignupEnd",value:function(t){var e=this;this.realAccountSignupEndedDisposer=(0,P.when)((function(){return e.root_store.ui.has_real_account_signup_ended}),(function(){try{var t=e.real_account_signup_ended_listener();if(!t||!t.then||"function"!=typeof t.then)throw new Error("Real account signup listeners are required to return a promise.");t.then((function(){e.root_store.ui.setRealAccountSignupEnd(!1),e.onRealAccountSignupEnd(e.real_account_signup_ended_listener)}))}catch(t){(0,j.isProduction)()||console.error(t)}})),this.real_account_signup_ended_listener=t}},{key:"disposePreSwitchAccount",value:function(){"function"==typeof this.preSwitchAccountDisposer&&this.preSwitchAccountDisposer(),this.pre_switch_account_listener=null}},{key:"disposeSwitchAccount",value:function(){"function"==typeof this.switchAccountDisposer&&this.switchAccountDisposer(),this.switch_account_listener=null}},{key:"disposeLogout",value:function(){"function"==typeof this.logoutDisposer&&this.logoutDisposer(),this.logout_listener=null}},{key:"disposeClientInit",value:function(){"function"==typeof this.clientInitDisposer&&this.clientInitDisposer(),this.client_init_listener=null}},{key:"disposeNetworkStatusChange",value:function(){"function"==typeof this.networkStatusChangeDisposer&&this.networkStatusChangeDisposer(),this.network_status_change_listener=null}},{key:"disposeThemeChange",value:function(){"function"==typeof this.themeChangeDisposer&&this.themeChangeDisposer(),this.theme_change_listener=null}},{key:"disposeRealAccountSignupEnd",value:function(){"function"==typeof this.realAccountSignupEndedDisposer&&this.realAccountSignupEndedDisposer(),this.real_account_signup_ended_listener=null}},{key:"onUnmount",value:function(){this.disposePreSwitchAccount(),this.disposeSwitchAccount(),this.disposeLogout(),this.disposeClientInit(),this.disposeNetworkStatusChange(),this.disposeThemeChange(),this.disposeRealAccountSignupEnd()}},{key:"assertHasValidCache",value:function(t){if(this.root_store.client.loginid!==t){for(var e=arguments.length,o=new Array(e>1?e-1:0),r=1;r<e;r++)o[r-1]=arguments[r];o.forEach((function(t){return t()})),this.partial_fetch_time=!1}}}])&&E(e.prototype,o),r&&E(e,r),t}(),k.STORAGES=Object.freeze({LOCAL_STORAGE:Symbol("LOCAL_STORAGE"),SESSION_STORAGE:Symbol("SESSION_STORAGE")}),v=T((m=S).prototype,"validation_errors",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),w=T(m.prototype,"validation_rules",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),O=T(m.prototype,"partial_fetch_time",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T(m.prototype,"retrieveFromStorage",[P.action],Object.getOwnPropertyDescriptor(m.prototype,"retrieveFromStorage"),m.prototype),T(m.prototype,"setValidationErrorMessages",[P.action],Object.getOwnPropertyDescriptor(m.prototype,"setValidationErrorMessages"),m.prototype),T(m.prototype,"setValidationRules",[P.action],Object.getOwnPropertyDescriptor(m.prototype,"setValidationRules"),m.prototype),T(m.prototype,"addRule",[P.action],Object.getOwnPropertyDescriptor(m.prototype,"addRule"),m.prototype),T(m.prototype,"validateProperty",[P.action],Object.getOwnPropertyDescriptor(m.prototype,"validateProperty"),m.prototype),T(m.prototype,"validateAllProperties",[P.action],Object.getOwnPropertyDescriptor(m.prototype,"validateAllProperties"),m.prototype),T(m.prototype,"onSwitchAccount",[r],Object.getOwnPropertyDescriptor(m.prototype,"onSwitchAccount"),m.prototype),T(m.prototype,"onPreSwitchAccount",[n],Object.getOwnPropertyDescriptor(m.prototype,"onPreSwitchAccount"),m.prototype),T(m.prototype,"onLogout",[i],Object.getOwnPropertyDescriptor(m.prototype,"onLogout"),m.prototype),T(m.prototype,"onClientInit",[c],Object.getOwnPropertyDescriptor(m.prototype,"onClientInit"),m.prototype),T(m.prototype,"onNetworkStatusChange",[s],Object.getOwnPropertyDescriptor(m.prototype,"onNetworkStatusChange"),m.prototype),T(m.prototype,"onThemeChange",[a],Object.getOwnPropertyDescriptor(m.prototype,"onThemeChange"),m.prototype),T(m.prototype,"onRealAccountSignupEnd",[u],Object.getOwnPropertyDescriptor(m.prototype,"onRealAccountSignupEnd"),m.prototype),T(m.prototype,"disposePreSwitchAccount",[p],Object.getOwnPropertyDescriptor(m.prototype,"disposePreSwitchAccount"),m.prototype),T(m.prototype,"disposeSwitchAccount",[l],Object.getOwnPropertyDescriptor(m.prototype,"disposeSwitchAccount"),m.prototype),T(m.prototype,"disposeLogout",[y],Object.getOwnPropertyDescriptor(m.prototype,"disposeLogout"),m.prototype),T(m.prototype,"disposeClientInit",[_],Object.getOwnPropertyDescriptor(m.prototype,"disposeClientInit"),m.prototype),T(m.prototype,"disposeNetworkStatusChange",[h],Object.getOwnPropertyDescriptor(m.prototype,"disposeNetworkStatusChange"),m.prototype),T(m.prototype,"disposeThemeChange",[d],Object.getOwnPropertyDescriptor(m.prototype,"disposeThemeChange"),m.prototype),T(m.prototype,"disposeRealAccountSignupEnd",[g],Object.getOwnPropertyDescriptor(m.prototype,"disposeRealAccountSignupEnd"),m.prototype),T(m.prototype,"onUnmount",[f],Object.getOwnPropertyDescriptor(m.prototype,"onUnmount"),m.prototype),T(m.prototype,"assertHasValidCache",[b],Object.getOwnPropertyDescriptor(m.prototype,"assertHasValidCache"),m.prototype),m)},75672:(t,e,o)=>{"use strict";o.d(e,{z1:()=>u,$j:()=>p});var r=o(97656),n=o(32735);function i(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function c(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?i(Object(o),!0).forEach((function(e){s(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function s(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var a=n.createContext(null);var u=function(t){var e=t.store,o=t.children;return n.createElement(a.Provider,{value:c(c({},e),{},{mobxStores:e})},o)},p=function(t){return function(e){return function(t,e){var o=function(o){var i=n.useContext(a),s=e;return function(t){return!("function"!=typeof t||!t.prototype||!t.prototype.isReactComponent)}(e)&&(s=function(t){return n.createElement(e,t)}),(0,r.SZ)((function(){return s(c(c({},o),t(i,o)))}))};return o.displayName=e.name,o}(t,e)}}},18880:(t,e,o)=>{"use strict";o.d(e,{Z:()=>ur});var r,n,i,c,s,a,u,p,l,y,_,h,d,g,f,b,m,v,w,O,k,S,P,j,D,A,R,L,x,z,C,I,E,T,M,N,W,U,V,B,H,F,G,q,J,Z,$,Y,K,X,Q,tt,et,ot,rt,nt,it,ct,st,at,ut,pt,lt,yt,_t,ht,dt,gt,ft,bt,mt,vt,wt,Ot,kt,St,Pt,jt,Dt,At,Rt,Lt,xt,zt,Ct,It,Et,Tt,Mt,Nt,Wt,Ut,Vt,Bt,Ht,Ft,Gt,qt,Jt,Zt,$t,Yt,Kt,Xt,Qt,te,ee,oe,re,ne,ie,ce,se,ae=o(49189),ue=o.n(ae),pe=o(59001),le=o(53806),ye=o.n(le),_e=o(48680),he=o(20374),de=o(58468),ge=o(42669),fe=o(31508),be=o.n(fe),me=o(16789),ve=o(86104),we=o(39402),Oe=o(74751),ke=o(36890),Se=o(57798),Pe=o(38759);function je(t){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function De(t,e,o,r,n,i,c){try{var s=t[i](c),a=s.value}catch(t){return void o(t)}s.done?e(a):Promise.resolve(a).then(r,n)}function Ae(t){return function(){var e=this,o=arguments;return new Promise((function(r,n){var i=t.apply(e,o);function c(t){De(i,r,n,c,s,"next",t)}function s(t){De(i,r,n,c,s,"throw",t)}c(void 0)}))}}function Re(t){return function(t){if(Array.isArray(t))return Le(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Le(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Le(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}function xe(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function ze(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?xe(Object(o),!0).forEach((function(e){Ce(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):xe(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function Ce(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function Ie(t,e,o,r){o&&Object.defineProperty(t,e,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}function Ee(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Te(t,e){return(Te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Me(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,r=Ue(t);if(e){var n=Ue(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return Ne(this,o)}}function Ne(t,e){return!e||"object"!==je(e)&&"function"!=typeof e?We(t):e}function We(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ue(t){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ve(t,e,o,r,n){var i={};return Object.keys(r).forEach((function(t){i[t]=r[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=o.slice().reverse().reduce((function(o,r){return r(t,e,o)||o}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var Be,He,Fe,Ge,qe,Je,Ze,$e,Ye,Ke,Xe,Qe,to,eo,oo,ro,no,io,co,so,ao,uo,po,lo,yo,_o,ho,go,fo,bo,mo,vo="client.accounts",wo=new RegExp("^(maltainvest|malta|iom)$"),Oo=new RegExp("^mt$"),ko=(r=pe.action.bound,n=pe.action.bound,i=pe.action.bound,c=pe.action.bound,s=pe.action.bound,a=pe.action.bound,u=pe.action.bound,p=pe.action.bound,l=pe.action.bound,y=pe.action.bound,_=pe.action.bound,h=pe.action.bound,d=pe.action.bound,g=pe.action.bound,f=pe.action.bound,b=pe.action.bound,m=pe.action.bound,v=pe.action.bound,w=pe.action.bound,O=pe.action.bound,k=pe.action.bound,S=pe.action.bound,P=pe.action.bound,j=pe.action.bound,D=pe.action.bound,A=pe.action.bound,R=pe.action.bound,L=pe.action.bound,x=pe.action.bound,z=pe.action.bound,C=pe.action.bound,I=pe.action.bound,E=pe.action.bound,T=pe.action.bound,M=pe.action.bound,N=pe.action.bound,W=pe.action.bound,U=pe.action.bound,V=pe.action.bound,B=pe.action.bound,H=pe.action.bound,F=pe.action.bound,G=pe.action.bound,q=pe.action.bound,J=pe.action.bound,Z=pe.action.bound,$=pe.action.bound,Y=pe.action.bound,K=pe.action.bound,X=pe.action.bound,Q=pe.action.bound,tt=pe.action.bound,et=pe.action.bound,ot=pe.action.bound,rt=pe.action.bound,nt=pe.action.bound,it=pe.action.bound,ct=pe.action.bound,st=pe.action.bound,at=pe.action.bound,ut=pe.action.bound,pt=pe.action.bound,lt=pe.action.bound,yt=pe.action.bound,_t=pe.action.bound,ht=pe.action.bound,dt=pe.action.bound,gt=pe.action.bound,ft=pe.action.bound,bt=pe.action.bound,se=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Te(t,e)}(b,t);var e,o,r,n,i,c,s,a,u,p,l,y,_,h,d,g,f=Me(b);function b(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,b);return Ie(e=f.call(this,{root_store:t,local_storage_properties:["device_data"],store_name:"client_store"}),"loginid",vt,We(e)),Ie(e,"upgrade_info",wt,We(e)),Ie(e,"email",Ot,We(e)),Ie(e,"accounts",kt,We(e)),Ie(e,"pre_switch_broadcast",St,We(e)),Ie(e,"switched",Pt,We(e)),Ie(e,"is_switching",jt,We(e)),Ie(e,"switch_broadcast",Dt,We(e)),Ie(e,"initialized_broadcast",At,We(e)),Ie(e,"currencies_list",Rt,We(e)),Ie(e,"residence_list",Lt,We(e)),Ie(e,"states_list",xt,We(e)),Ie(e,"selected_currency",zt,We(e)),Ie(e,"is_populating_account_list",Ct,We(e)),Ie(e,"is_populating_mt5_account_list",It,We(e)),Ie(e,"has_reality_check",Et,We(e)),Ie(e,"is_reality_check_dismissed",Tt,We(e)),Ie(e,"reality_check_dur",Mt,We(e)),Ie(e,"reality_check_timeout",Nt,We(e)),Ie(e,"website_status",Wt,We(e)),Ie(e,"account_settings",Ut,We(e)),Ie(e,"account_status",Vt,We(e)),Ie(e,"device_data",Bt,We(e)),Ie(e,"is_logging_in",Ht,We(e)),Ie(e,"has_logged_out",Ft,We(e)),Ie(e,"is_landing_company_loaded",Gt,We(e)),Ie(e,"is_account_setting_loaded",qt,We(e)),Ie(e,"landing_companies",Jt,We(e)),Ie(e,"upgradeable_landing_companies",Zt,We(e)),Ie(e,"mt5_disabled_signup_types",$t,We(e)),Ie(e,"mt5_login_list",Yt,We(e)),Ie(e,"mt5_login_list_error",Kt,We(e)),Ie(e,"statement",Xt,We(e)),Ie(e,"obj_total_balance",Qt,We(e)),Ie(e,"verification_code",te,We(e)),Ie(e,"account_limits",ee,We(e)),Ie(e,"self_exclusion",oe,We(e)),Ie(e,"local_currency_config",re,We(e)),Ie(e,"has_cookie_account",ne,We(e)),Ie(e,"financial_assessment",ie,We(e)),Ie(e,"trading_servers",ce,We(e)),e.is_mt5_account_list_updated=!1,e.hasAnyRealAccount=function(){return e.account_list.some((function(t){return 0===t.is_virtual}))},e.isMT5Allowed=function(t){return!t||!Object.keys(t).length||("mt_financial_company"in t||"mt_gaming_company"in t)},e.isEuCountrySelected=function(t){return!!t&&(0,ve.isEuCountry)(t)},e.isAccountOfType=function(t){var o=(0,Oe.ai)(e.loginid);return("virtual"===t&&"virtual"===o||"real"===t&&"virtual"!==o||t===o)&&!e.isDisabled()},e.isAccountOfTypeDisabled=function(t){var o=e.account_list.filter((function(e){return(0,Oe.ai)(e.loginid)===t}));return o.length>0&&o.every((function(t){return t.is_disabled}))},e.getRiskAssessment=function(){var t;if(!e.account_status)return!1;var o=null===(t=e.account_status)||void 0===t?void 0:t.status;return e.isAccountOfType("financial")?/(financial_assessment|trading_experience)_not_complete/.test(o):/financial_assessment_not_complete/.test(o)},e.shouldCompleteTax=function(){var t;return!!e.isAccountOfType("financial")&&!/crs_tin_information/.test(null===(t=e.account_status||{})||void 0===t?void 0:t.status)},(0,pe.reaction)((function(){return[e.is_logged_in,e.loginid,e.email,e.landing_company,e.currency,e.residence,e.account_settings]}),(function(){e.setCookieAccount()})),(0,pe.when)((function(){return e.should_have_real_account}),(function(){e.root_store.ui.showAccountTypesModalForEuropean(),e.onRealAccountSignupEnd((function(){return e.has_any_real_account||e.root_store.ui.showAccountTypesModalForEuropean(),Promise.resolve()})),e.root_store.ui.is_real_acc_signup_on||e.root_store.ui.toggleAccountTypesModal(!0)})),(0,pe.when)((function(){return!e.is_logged_in&&e.root_store.ui&&e.root_store.ui.is_real_acc_signup_on}),(function(){return e.root_store.ui.closeRealAccountSignup()})),e}return e=b,(o=[{key:"balance",get:function(){if(!(0,_e.isEmptyObject)(this.accounts))return this.accounts[this.loginid]&&"balance"in this.accounts[this.loginid]?this.accounts[this.loginid].balance.toString():void 0}},{key:"is_reality_check_visible",get:function(){return!(!this.loginid||!this.landing_company||!this.has_reality_check||this.reality_check_dismissed)}},{key:"is_svg",get:function(){return!!this.landing_company_shortcode&&("svg"===this.landing_company_shortcode||"costarica"===this.landing_company_shortcode)}},{key:"reality_check_duration",get:function(){return this.has_reality_check?this.reality_check_dur||+_e.LocalStore.get("reality_check_duration"):void 0}},{key:"reality_check_dismissed",get:function(){return this.has_reality_check?this.is_reality_check_dismissed||JSON.parse(_e.LocalStore.get("reality_check_dismissed")||!1):void 0}},{key:"has_active_real_account",get:function(){return this.active_accounts.some((function(t){return 0===t.is_virtual}))}},{key:"has_maltainvest_account",get:function(){return this.active_accounts.some((function(t){return"maltainvest"===t.landing_company_shortcode}))}},{key:"has_malta_account",get:function(){return this.active_accounts.some((function(t){return"malta"===t.landing_company_shortcode}))}},{key:"has_any_real_account",get:function(){return this.hasAnyRealAccount()}},{key:"first_switchable_real_loginid",get:function(){return this.active_accounts.find((function(t){return 0===t.is_virtual&&"svg"===t.landing_company_shortcode})).loginid||void 0}},{key:"can_change_fiat_currency",get:function(){var t=!this.has_mt5_login,e=0===this.statement.count&&0===this.statement.transactions.length&&t;return!this.is_virtual&&e&&"fiat"===this.current_currency_type}},{key:"legal_allowed_currencies",get:function(){var t=this;if(!this.landing_companies)return[];if(this.root_store.ui&&this.root_store.ui.real_account_signup_target){var e="maltainvest"===this.root_store.ui.real_account_signup_target?"financial":"gaming";if(this.landing_companies["".concat(e,"_company")]&&this.current_landing_company&&this.accounts&&this.accounts[this.loginid]&&!this.accounts[this.loginid].currency)return this.landing_companies["".concat(e,"_company")].legal_allowed_currencies.filter((function(e){return t.current_landing_company.legal_allowed_currencies.includes(e)}));if(this.landing_companies["".concat(e,"_company")])return this.landing_companies["".concat(e,"_company")].legal_allowed_currencies}return this.landing_companies.gaming_company?this.landing_companies.gaming_company.legal_allowed_currencies:this.landing_companies.financial_company?this.landing_companies.financial_company.legal_allowed_currencies:[]}},{key:"upgradeable_currencies",get:function(){var t=this;return this.legal_allowed_currencies&&this.website_status.currencies_config?this.legal_allowed_currencies.map((function(e){return ze({value:e},t.website_status.currencies_config[e])})):[]}},{key:"current_currency_type",get:function(){return"virtual"===this.account_type?"virtual":this.website_status&&this.website_status.currencies_config&&this.website_status.currencies_config[this.currency]?this.website_status.currencies_config[this.currency].type:void 0}},{key:"available_crypto_currencies",get:function(){var t=Object.values(this.accounts).reduce((function(t,e){return t.push(e.currency),t}),[]);return this.upgradeable_currencies.filter((function(e){return!t.includes(e.value)&&"crypto"===e.type}))}},{key:"has_iom_account",get:function(){return this.active_accounts.some((function(t){return"iom"===t.landing_company_shortcode}))}},{key:"has_fiat",get:function(){var t=Object.values(this.accounts).reduce((function(t,e){return e.is_virtual||t.push(e.currency),t}),[]);return!!this.upgradeable_currencies.filter((function(e){return t.includes(e.value)&&"fiat"===e.type})).length}},{key:"current_fiat_currency",get:function(){var t=Object.values(this.accounts).reduce((function(t,e){return e.is_virtual||t.push(e.currency),t}),[]);return this.has_fiat?this.upgradeable_currencies.filter((function(e){return t.includes(e.value)&&"fiat"===e.type}))[0].value:void 0}},{key:"current_landing_company",get:function(){var t=this,e=Object.keys(this.landing_companies).find((function(e){var o;return(null===(o=t.landing_companies[e])||void 0===o?void 0:o.shortcode)===t.landing_company_shortcode}));return e?this.landing_companies[e]:void 0}},{key:"account_list",get:function(){var t=this;return this.all_loginids.map((function(e){return t.getAccountInfo(e)})).filter((function(t){return t}))}},{key:"has_mt5_login",get:function(){return this.mt5_login_list.length>0}},{key:"has_account_error_in_mt5_list",get:function(){var t;return!!this.is_logged_in&&(null===(t=this.mt5_login_list)||void 0===t?void 0:t.some((function(t){return!!t.has_error})))}},{key:"can_have_more_real_synthetic_mt5",get:function(){var t=this.mt5_login_list.reduce((function(t,e){return"real"!==e.account_type||"synthetic"!==e.market_type&&"gaming"!==e.market_type?t:t+1}),0),e=this.trading_servers.reduce((function(t,e){return e.supported_accounts.includes("gaming")&&!e.disabled?t+1:t}),0);return t>0&&e>0}},{key:"active_accounts",get:function(){return this.accounts instanceof Object?Object.values(this.accounts).filter((function(t){return!t.is_disabled})):[]}},{key:"all_loginids",get:function(){return(0,_e.isEmptyObject)(this.accounts)?[]:Object.keys(this.accounts)}},{key:"account_title",get:function(){return(0,Oe.GH)(this.loginid)}},{key:"currency",get:function(){return this.selected_currency.length?this.selected_currency:this.is_logged_in?this.accounts[this.loginid].currency:this.default_currency}},{key:"default_currency",get:function(){if(Object.keys(this.currencies_list).length>0){var t=Object.keys(this.currencies_list);return this.currencies_list[(0,he.localize)("Fiat")].length<1?"USD":Object.values(this.currencies_list["".concat(t[0])])[0].text}return"USD"}},{key:"should_allow_authentication",get:function(){var t,e;return(null===(t=this.account_status)||void 0===t||null===(e=t.status)||void 0===e?void 0:e.some((function(t){return"allow_document_upload"===t})))||!!this.is_authentication_needed}},{key:"is_authentication_needed",get:function(){var t,e,o;return null===(t=this.account_status)||void 0===t||null===(e=t.authentication)||void 0===e||null===(o=e.needs_verification)||void 0===o?void 0:o.length}},{key:"is_tnc_needed",get:function(){if(this.is_virtual)return!1;var t=this.account_settings.client_tnc_status,e=this.website_status.terms_conditions_version;return void 0!==t&&t!==e}},{key:"is_social_signup",get:function(){var t,e;return null===(t=this.account_status)||void 0===t||null===(e=t.status)||void 0===e?void 0:e.includes("social_signup")}},{key:"is_trading_password_required",get:function(){var t,e;return null===(t=this.account_status)||void 0===t||null===(e=t.status)||void 0===e?void 0:e.includes("trading_password_required")}},{key:"is_financial_information_incomplete",get:function(){var t,e;return null===(t=this.account_status)||void 0===t||null===(e=t.status)||void 0===e?void 0:e.some((function(t){return"financial_information_not_complete"===t}))}},{key:"is_withdrawal_lock",get:function(){var t,e;return null===(t=this.account_status)||void 0===t||null===(e=t.status)||void 0===e?void 0:e.some((function(t){return/^(withdrawal_locked|no_withdrawal_or_trading)$/.test(t)}))}},{key:"is_trading_experience_incomplete",get:function(){var t,e;return null===(t=this.account_status)||void 0===t||null===(e=t.status)||void 0===e?void 0:e.some((function(t){return"trading_experience_not_complete"===t}))}},{key:"authentication_status",get:function(){var t,e,o,r,n,i;return{document_status:null===(t=this.account_status)||void 0===t||null===(e=t.authentication)||void 0===e||null===(o=e.document)||void 0===o?void 0:o.status,identity_status:null===(r=this.account_status)||void 0===r||null===(n=r.authentication)||void 0===n||null===(i=n.identity)||void 0===i?void 0:i.status}}},{key:"social_identity_provider",get:function(){var t;return null===(t=this.account_status)||void 0===t?void 0:t.social_identity_provider}},{key:"is_fully_authenticated",get:function(){var t,e;return null===(t=this.account_status)||void 0===t||null===(e=t.status)||void 0===e?void 0:e.some((function(t){return"authenticated"===t}))}},{key:"is_pending_authentication",get:function(){var t,e;return null===(t=this.account_status)||void 0===t||null===(e=t.status)||void 0===e?void 0:e.some((function(t){return"document_under_review"===t}))}},{key:"is_financial_account",get:function(){return!!this.landing_companies&&"financial"===this.account_type}},{key:"is_age_verified",get:function(){var t,e;return null===(t=this.account_status)||void 0===t||null===(e=t.status)||void 0===e?void 0:e.some((function(t){return"age_verification"===t}))}},{key:"landing_company_shortcode",get:function(){if(this.accounts[this.loginid])return this.accounts[this.loginid].landing_company_shortcode}},{key:"landing_company",get:function(){return this.landing_companies}},{key:"is_valid_login",get:function(){if(!this.is_logged_in)return!0;var t=new RegExp("^(MX|MF|VRTC|MLT|CR|FOG)[0-9]+$","i");return this.all_loginids.every((function(e){return t.test(e)}))}},{key:"is_logged_in",get:function(){return!!(!(0,_e.isEmptyObject)(this.accounts)&&Object.keys(this.accounts).length>0&&this.loginid&&this.accounts[this.loginid].token)}},{key:"is_virtual",get:function(){return!(0,_e.isEmptyObject)(this.accounts)&&this.accounts[this.loginid]&&!!this.accounts[this.loginid].is_virtual}},{key:"is_eu",get:function(){if(!this.landing_companies)return!1;var t=this.landing_companies,e=t.gaming_company,o=t.financial_company,r=null==o?void 0:o.shortcode,n=null==e?void 0:e.shortcode;return r||n?wo.test(r)||wo.test(n):Oo.test(this.residence)}},{key:"is_uk",get:function(){return"gb"===this.residence}},{key:"should_have_real_account",get:function(){return this.standpoint.iom&&this.is_uk&&!this.has_any_real_account}},{key:"standpoint",get:function(){var t={iom:!1,svg:!1,malta:!1,maltainvest:!1,gaming_company:!1,financial_company:!1};if(!this.landing_companies)return t;var e,o,r,n,i=this.landing_companies,c=i.gaming_company,s=i.financial_company;return null!=c&&c.shortcode&&Object.assign(t,(Ce(o={},c.shortcode,!(null==c||!c.shortcode)),Ce(o,"gaming_company",null!==(e=null==c?void 0:c.shortcode)&&void 0!==e&&e),o)),null!=s&&s.shortcode&&Object.assign(t,(Ce(n={},s.shortcode,!(null==s||!s.shortcode)),Ce(n,"financial_company",null!==(r=null==s?void 0:s.shortcode)&&void 0!==r&&r),n)),t}},{key:"can_upgrade",get:function(){return this.upgrade_info&&(this.upgrade_info.can_upgrade||this.upgrade_info.can_open_multi)}},{key:"can_upgrade_to",get:function(){return this.upgrade_info&&this.upgrade_info.can_upgrade_to}},{key:"virtual_account_loginid",get:function(){var t=this;return this.all_loginids.find((function(e){return!!t.accounts[e].is_virtual}))}},{key:"is_single_currency",get:function(){var t=this;return 1===Object.keys(this.currencies_list).map((function(e){return Object.values(t.currencies_list[e]).length})).reduce((function(t,e){return t+e}),0)}},{key:"account_type",get:function(){return(0,Oe.ai)(this.loginid)}},{key:"is_mt5_allowed",get:function(){return this.isMT5Allowed(this.landing_companies)}},{key:"clients_country",get:function(){var t;return null===(t=this.website_status)||void 0===t?void 0:t.clients_country}},{key:"is_eu_country",get:function(){var t=this.website_status.clients_country;return!!t&&(0,ve.isEuCountry)(t)}},{key:"is_synthetics_unavailable",get:function(){return this.is_logged_in?(0,ve.isSyntheticsUnavailable)(this.residence):(0,ve.isSyntheticsUnavailable)(this.website_status.clients_country)}},{key:"is_options_blocked",get:function(){return(0,ve.isOptionsBlocked)(this.residence)}},{key:"resetLocalStorageValues",value:function(t){this.accounts[t].accepted_bch=0,_e.LocalStore.setObject(vo,this.accounts),_e.LocalStore.set("active_loginid",t),this.syncWithSmartTrader(t,(0,pe.toJS)(this.accounts)),this.loginid=t}},{key:"getBasicUpgradeInfo",value:function(){var t,e,o=this,r=Re(new Set(_e.State.getResponse("authorize.upgradeable_landing_companies"))),n=!1;return(r||[]).length&&(n=-1!==r.indexOf(this.accounts[this.loginid].landing_company_shortcode),(e=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.find((function(t){return t!==o.accounts[o.loginid].landing_company_shortcode&&-1!==r.indexOf(t)}))}("svg","iom","malta","maltainvest"))&&(t="maltainvest"===e?"financial":"real")),{type:t,can_upgrade:!!e,can_upgrade_to:e,can_open_multi:n}}},{key:"setMT5DisabledSignupTypes",value:function(t){var e=this.mt5_disabled_signup_types;this.mt5_disabled_signup_types=ze({current_list:e},t)}},{key:"getLimits",value:function(){var t=this;return new Promise((function(e){de.WS.authorized.storage.getLimits().then((function(o){(0,pe.runInAction)((function(){o.error?(t.account_limits={api_initial_load_error:o.error.message},e(o)):(t.account_limits=ze(ze({},o.get_limits),{},{is_loading:!1}),e(o))}))}))}))}},{key:"setCookieAccount",value:function(){var t=/deriv\.(com|me)/.test(window.location.hostname)?_e.deriv_urls.DERIV_HOST_NAME:"binary.sx",e=this.loginid,o=this.email,r=this.landing_company_shortcode,n=this.currency,i=this.residence,c=this.account_settings,s=c.first_name,a=c.last_name,u=c.name;if(e&&o){var p={loginid:e,email:o,landing_company_shortcode:r,currency:n,residence:i,first_name:s,last_name:a,name:u};ue().set("client_information",p,{domain:t}),this.has_cookie_account=!0}else ue().remove("client_information",{domain:t}),this.has_cookie_account=!1}},{key:"getSelfExclusion",value:function(){var t=this;return new Promise((function(e){de.WS.authorized.storage.getSelfExclusion().then((function(o){(0,pe.runInAction)((function(){o.get_self_exclusion?t.self_exclusion=o.get_self_exclusion:t.self_exclusion=!1,e(o)}))}))}))}},{key:"updateSelfExclusion",value:function(t){var e=this;return new Promise((function(o){de.WS.authorized.storage.setSelfExclusion(t).then((function(t){t.error||e.getSelfExclusion(),o(t)}))}))}},{key:"responsePayoutCurrencies",value:function(t){var e=t.payout_currencies||t;this.currencies_list=(0,Pe.G)(e),this.selectCurrency("")}},{key:"responseAuthorize",value:function(t){this.accounts[this.loginid].email=t.authorize.email,this.accounts[this.loginid].currency=t.authorize.currency,this.accounts[this.loginid].is_virtual=+t.authorize.is_virtual,this.accounts[this.loginid].session_start=parseInt(ye()().utc().valueOf()/1e3),this.accounts[this.loginid].landing_company_shortcode=t.authorize.landing_company_name,this.accounts[this.loginid].country=t.country,this.updateAccountList(t.authorize.account_list),this.upgrade_info=this.getBasicUpgradeInfo(),this.user_id=t.authorize.user_id,this.upgradeable_landing_companies=Re(new Set(t.authorize.upgradeable_landing_companies)),this.local_currency_config.currency=Object.keys(t.authorize.local_currencies)[0],this.local_currency_config.decimal_places=(0,_e.isEmptyObject)(t.authorize.local_currencies)?2:+t.authorize.local_currencies[this.local_currency_config.currency].fractional_digits}},{key:"setWebsiteStatus",value:function(t){this.website_status=t.website_status,this.responseWebsiteStatus(t),(0,_e.setCurrencies)(this.website_status)}},{key:"accountRealReaction",value:(g=Ae(regeneratorRuntime.mark((function t(e){var o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var r;(0,pe.runInAction)((function(){o.is_populating_account_list=!0}));var n=JSON.parse(_e.LocalStore.get(vo)),i=null!==(r=e.new_account_real)&&void 0!==r?r:e.new_account_maltainvest,c=i.oauth_token,s=i.client_id;be().authorize(c).then((function(e){var r={};r.token=c,r.residence=e.authorize.country,r.currency=e.authorize.currency,r.is_virtual=e.authorize.is_virtual,r.landing_company_name=e.authorize.landing_company_fullname,r.landing_company_shortcode=e.authorize.landing_company_name,(0,pe.runInAction)((function(){return n[s]=r})),o.setLoginInformation(n,s),de.WS.authorized.storage.getSettings().then((function(e){o.setAccountSettings(e.get_settings),t()}))}))})));case 1:case"end":return t.stop()}}),t)}))),function(t){return g.apply(this,arguments)})},{key:"setLoginInformation",value:function(t,e){this.setAccounts(t),localStorage.setItem(vo,JSON.stringify(t)),_e.LocalStore.set(vo,JSON.stringify(t)),this.is_populating_account_list=!1,this.upgrade_info=this.getBasicUpgradeInfo(),this.setSwitched(e),this.syncWithSmartTrader(e,t)}},{key:"realAccountSignup",value:(d=Ae(regeneratorRuntime.mark((function t(e){var o,r,n,i,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o="BTC",r="maltainvest"===this.root_store.ui.real_account_signup_target,n="samoa"===this.root_store.ui.real_account_signup_target,i="",e.residence=this.residence,r&&(i=e.currency,e.accept_risk=e.accept_risk||0,delete e.currency),!r){t.next=12;break}return t.next=9,de.WS.newAccountRealMaltaInvest(e);case 9:t.t0=t.sent,t.next=15;break;case 12:return t.next=14,de.WS.newAccountReal(e);case 14:t.t0=t.sent;case 15:if((c=t.t0).error){t.next=29;break}return t.next=19,this.accountRealReaction(c);case 19:if(!r){t.next=22;break}return t.next=22,this.setAccountCurrency(i);case 22:if(!n){t.next=25;break}return t.next=25,this.setAccountCurrency(o);case 25:return localStorage.removeItem("real_account_signup_wizard"),t.next=28,this.root_store.gtm.pushDataLayer({event:"real_signup"});case 28:return t.abrupt("return",Promise.resolve(ze(ze(ze({},c),r?{new_account_maltainvest:ze(ze({},c.new_account_maltainvest),{},{currency:i})}:{}),n?{new_account_samoa:{currency:i}}:{})));case 29:return t.abrupt("return",Promise.reject(c.error));case 30:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"setAccountCurrency",value:(h=Ae(regeneratorRuntime.mark((function t(e){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,de.WS.setAccountCurrency(e,{previous_currency:this.currency});case 2:if((o=t.sent).error){t.next=7;break}return t.next=6,this.updateAccountCurrency(e);case 6:return t.abrupt("return",Promise.resolve(o));case 7:return t.abrupt("return",Promise.reject(o.error));case 8:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"updateAccountCurrency",value:(_=Ae(regeneratorRuntime.mark((function t(e){var o,r=this,n=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=!(n.length>1&&void 0!==n[1])||n[1],(0,pe.runInAction)((function(){var t=ze({},r.accounts[r.loginid]);t.currency=e,"balance"in t||(t.balance=0),r.accounts[r.loginid]=t})),o&&(localStorage.setItem(vo,JSON.stringify(this.accounts)),_e.LocalStore.setObject(vo,JSON.parse(JSON.stringify(this.accounts)))),this.selectCurrency(e),this.root_store.ui.removeNotificationMessage({key:"currency"}),this.root_store.ui.removeNotificationByKey({key:"currency"}),t.next=8,this.init();case 8:case"end":return t.stop()}}),t,this)}))),function(t){return _.apply(this,arguments)})},{key:"createCryptoAccount",value:(y=Ae(regeneratorRuntime.mark((function t(e){var o,r,n,i,c,s,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=this.residence,r=this.account_settings,n=r.date_of_birth,i=r.first_name,c=r.last_name,s={residence:o,currency:e,first_name:i,last_name:c,date_of_birth:(0,_e.toMoment)(n).format("YYYY-MM-DD")},t.next=5,de.WS.newAccountReal(s);case 5:if((a=t.sent).error){t.next=10;break}return t.next=9,this.accountRealReaction(a);case 9:return t.abrupt("return",Promise.resolve(a));case 10:return t.abrupt("return",Promise.reject(a.error));case 11:case"end":return t.stop()}}),t,this)}))),function(t){return y.apply(this,arguments)})},{key:"residence",get:function(){var t;return this.is_logged_in&&null!==(t=this.account_settings.country_code)&&void 0!==t?t:""}},{key:"email_address",get:function(){return this.accounts&&this.accounts[this.loginid]?this.accounts[this.loginid].email:""}},{key:"is_website_status_ready",get:function(){return this.website_status&&!be().getAvailability().is_down}},{key:"updateAccountList",value:function(t){var e=this;t.forEach((function(t){e.accounts[t.loginid]&&(e.accounts[t.loginid].excluded_until=t.excluded_until||"",Object.keys(t).forEach((function(o){var r="country"===o?"residence":o,n=void 0===t[o]?"":t[o];"loginid"!==r&&(e.accounts[t.loginid][r]=n)})))}))}},{key:"switchAccount",value:(l=Ae(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setPreSwitchAccount(!0),this.setIsLoggingIn(!0),this.root_store.ui.removeNotifications(!0),this.root_store.ui.removeAllNotificationMessages(!0),this.setSwitched(e),t.t0=this,t.next=8,de.WS.authorized.payoutCurrencies();case 8:t.t1=t.sent,t.t0.responsePayoutCurrencies.call(t.t0,t.t1);case 10:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})},{key:"resetVirtualBalance",value:(p=Ae(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.root_store.ui.removeNotificationByKey({key:"reset_virtual_balance"}),this.root_store.ui.removeNotificationMessage({key:"reset_virtual_balance",should_show_again:!0}),t.next=4,de.WS.authorized.topupVirtual();case 4:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"switchEndSignal",value:function(){this.switch_broadcast=!1}},{key:"refreshNotifications",value:function(){this.root_store.ui.removeNotifications(!0),this.root_store.ui.removeAllNotificationMessages();var t=this.accounts[this.loginid],e=(0,Se.Pu)(t,this,this.root_store.ui,this.root_store.modules.cashier).has_missing_required_field;this.setHasMissingRequiredField(e)}},{key:"init",value:(u=Ae(regeneratorRuntime.mark((function t(e){var o,r,n,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setIsLoggingIn(!0),t.next=3,this.setUserLogin(e);case 3:if(o=t.sent,this.setDeviceData(),null==o||!o.error){t.next=13;break}return t.next=8,this.logout();case 8:return this.root_store.common.setError(!0,{header:o.error.message,message:(0,he.localize)("Please Log in"),should_show_refresh:!1,redirect_label:(0,he.localize)("Log in"),redirectOnClick:function(){return(0,_e.redirectToLogin)(!1,(0,he.getLanguage)())}}),this.setIsLoggingIn(!1),this.setInitialized(!1),this.setSwitched(""),t.abrupt("return",!1);case 13:if(this.setLoginId(_e.LocalStore.get("active_loginid")),this.setAccounts(_e.LocalStore.getObject(vo)),this.setSwitched(""),r=this.accounts[this.loginid],!o){t.next=29;break}if(this.loginid!==o.authorize.loginid){t.next=26;break}return ge.Z.authorizeAccount(o),t.next=22,this.root_store.rudderstack.identifyEvent();case 22:return t.next=24,this.root_store.gtm.pushDataLayer({event:"login"});case 24:t.next=28;break;case 26:return t.next=28,be().authorize(r.token);case 28:(0,pe.runInAction)((function(){i.is_populating_account_list=!1}));case 29:return(0,pe.reaction)((function(){var t,e;return[i.account_settings,i.account_status,null===(t=i.root_store.modules)||void 0===t||null===(e=t.cashier)||void 0===e?void 0:e.is_p2p_visible]}),(function(){r=i.accounts[i.loginid],be().wait("landing_company").then((function(){if(i.root_store.ui.removeNotifications(),i.root_store.ui.removeAllNotificationMessages(),r&&!r.is_virtual){var t=(0,Se.Pu)(r,i,i.root_store.ui,i.root_store.modules.cashier).has_missing_required_field;i.setHasMissingRequiredField(t)}}))})),this.selectCurrency(""),t.t0=this,t.next=34,de.WS.authorized.payoutCurrencies();case 34:if(t.t1=t.sent,t.t0.responsePayoutCurrencies.call(t.t0,t.t1),!this.is_logged_in){t.next=58;break}return de.WS.storage.mt5LoginList().then(this.responseMt5LoginList),de.WS.tradingServers().then(this.responseTradingServers),t.t2=this,t.next=42,be().send({statement:1});case 42:return t.t3=t.sent,t.t2.responseStatement.call(t.t2,t.t3),t.next=46,de.WS.authorized.cache.getSettings();case 46:return n=t.sent.get_settings,t.next=49,this.fetchResidenceList();case 49:return n&&!n.residence&&this.root_store.ui.toggleSetResidenceModal(!0),t.next=52,de.WS.authorized.cache.landingCompany(this.residence).then(this.responseLandingCompany);case 52:if(this.is_virtual){t.next=55;break}return t.next=55,this.getLimits();case 55:this.switched||this.has_any_real_account||!this.is_mt5_allowed||this.root_store.ui.is_real_acc_signup_on||this.root_store.ui.toggleWelcomeModal({is_visible:!0}),t.next=59;break;case 58:this.resetMt5AccountListPopulation();case 59:return t.t4=this,t.next=62,de.WS.wait("website_status");case 62:return t.t5=t.sent,t.t4.responseWebsiteStatus.call(t.t4,t.t5),this.registerReactions(),this.setIsLoggingIn(!1),this.setInitialized(!0),t.abrupt("return",!0);case 68:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"resetMt5AccountListPopulation",value:function(){this.is_populating_mt5_account_list=!1}},{key:"responseWebsiteStatus",value:function(t){this.website_status=t.website_status,this.website_status.message&&this.website_status.message.length?this.root_store.ui.addNotificationMessage({key:"maintenance",header:(0,he.localize)("Site is being updated"),message:(0,he.localize)(this.website_status.message),type:"warning",is_persistent:!0}):this.root_store.ui.removeNotificationMessage({key:"maintenance"})}},{key:"responseLandingCompany",value:function(t){this.is_landing_company_loaded=!0,this.landing_companies=t.landing_company,this.setRealityCheck()}},{key:"setRealityCheck",value:function(){var t;this.has_reality_check=null===(t=this.current_landing_company)||void 0===t?void 0:t.has_reality_check,this.has_reality_check&&this.reality_check_duration&&void 0===this.reality_check_timeout&&this.setRealityCheckDuration(this.reality_check_duration)}},{key:"setLoginId",value:function(t){this.loginid=t}},{key:"setAccounts",value:function(t){this.accounts=t}},{key:"setSwitched",value:function(t){this.switched=t}},{key:"setHasMissingRequiredField",value:function(t){this.has_missing_required_field=t}},{key:"isDisabled",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.loginid;return this.getAccount(t).is_disabled}},{key:"getToken",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.loginid;return this.getAccount(t).token}},{key:"getAccount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.loginid;return this.accounts[t]}},{key:"getAccountInfo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.loginid,e=this.getAccount(t),o=e.currency,r=e.is_disabled,n=e.is_virtual,i=!n&&o?o:this.account_title;return{loginid:t,is_disabled:r,is_virtual:n,icon:i.toLowerCase(),title:"virtual"===i.toLowerCase()?(0,he.localize)("DEMO"):i}}},{key:"setIsLoggingIn",value:function(t){this.is_logging_in=t}},{key:"setPreSwitchAccount",value:function(t){this.pre_switch_broadcast=t}},{key:"broadcastAccountChange",value:function(){this.switch_broadcast=!0}},{key:"broadcastAccountChangeAfterAuthorize",value:function(){var t=this;return be().wait("authorize").then((function(){t.broadcastAccountChange()}))}},{key:"handleNotFoundLoginId",value:function(){this.root_store.ui.addNotificationMessage({message:(0,he.localize)("Could not switch to default account."),type:"danger"}),this.logout()}},{key:"isUnableToFindLoginId",value:function(){var t=this;return!this.all_loginids.some((function(e){return e!==t.switched}))||this.switched===this.loginid}},{key:"switchAccountHandler",value:(a=Ae(regeneratorRuntime.mark((function t(){var e,o,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.switched&&this.switched.length&&this.getAccount(this.switched).token){t.next=9;break}if(!this.isUnableToFindLoginId()){t.next=4;break}return this.handleNotFoundLoginId(),t.abrupt("return");case 4:return this.root_store.ui.addNotificationMessage({message:(0,he.localize)("Switching to default account."),type:"info"}),this.switchAccount(this.all_loginids[0]),t.next=8,this.switchAccountHandler();case 8:return t.abrupt("return");case 9:if((0,pe.runInAction)((function(){return r.is_switching=!0})),e=this.loginid,this.resetLocalStorageValues(this.switched),me.clear(),!(o=this.is_virtual||/VRTC/.test(e))){t.next=20;break}return be().closeAndOpenNewConnection(),t.next=18,be().wait("authorize");case 18:t.next=24;break;case 20:return t.next=22,de.WS.forgetAll("balance");case 22:return t.next=24,be().authorize(this.getToken());case 24:return this.root_store.common.has_error&&this.root_store.common.setError(!1,null),sessionStorage.setItem("active_tab","1"),this.root_store.gtm.setLoginFlag(),t.next=29,this.init();case 29:o||this.broadcastAccountChange(),this.is_virtual||this.getLimits(),(0,pe.runInAction)((function(){return r.is_switching=!1}));case 32:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"registerReactions",value:function(){var t=this;(0,pe.when)((function(){return t.switched}),(function(){var e;null!==(e=t.accounts[t.switched])&&void 0!==e&&e.is_virtual&&(t.root_store.ui.removeNotifications(!0),t.root_store.ui.removeAllNotificationMessages()),t.switchAccountHandler()}))}},{key:"resetVirtualBalanceNotification",value:function(t){if(this.is_logged_in&&this.accounts[t].is_virtual){var e=999e3,o=parseInt(this.accounts[t].balance);if(o<=1e3||o>=e){var r=(0,he.localize)("Your demo account balance is low. Reset your balance to continue trading from your demo account.");o>=e&&(r=(0,he.localize)("Your demo account balance has reached the maximum limit, and you will not be able to place new trades. Reset your balance to continue trading from your demo account.")),this.root_store.ui.addNotificationMessage((0,Se.G$)({},{resetVirtualBalance:this.resetVirtualBalance,message:r}).reset_virtual_balance)}else this.root_store.ui.removeNotificationByKey({key:"reset_virtual_balance"}),this.root_store.ui.removeNotificationMessage({key:"reset_virtual_balance",should_show_again:!0})}}},{key:"setBalanceActiveAccount",value:function(t){this.accounts[null==t?void 0:t.loginid]&&t.loginid===this.loginid&&(this.accounts[t.loginid].balance=t.balance,this.accounts[t.loginid].is_virtual&&this.resetVirtualBalanceNotification(t.loginid),this.resetLocalStorageValues(this.loginid))}},{key:"setBalanceOtherAccounts",value:function(t){var e,o,r=this;if((null===(e=this.root_store.modules)||void 0===e||null===(o=e.cashier)||void 0===o||!o.isMT5TransferInProgress())&&(this.accounts[null==t?void 0:t.loginid]&&!t.accounts&&t.loginid!==this.loginid&&(this.accounts[t.loginid].balance=t.balance),this.accounts[null==t?void 0:t.loginid]&&t.accounts&&Object.keys(t.accounts).forEach((function(e){e!==r.loginid&&r.accounts[e]&&(r.accounts[e].balance=+t.accounts[e].balance)})),t.total)){var n=(0,_e.getPropertyValue)(t,["total","deriv"]),i=(0,_e.getPropertyValue)(t,["total","mt5"]),c=!(0,_e.isEmptyObject)(i);this.obj_total_balance={amount_real:+n.amount,amount_mt5:c?+i.amount:this.obj_total_balance.amount_mt5,currency:n.currency}}}},{key:"selectCurrency",value:function(t){this.selected_currency=t}},{key:"setResidence",value:function(t){this.accounts[this.loginid].residence=t}},{key:"setEmail",value:function(t){this.accounts[this.loginid].email=t,this.email=t}},{key:"setAccountSettings",value:function(t){this.account_settings=t,this.is_account_setting_loaded=!0}},{key:"setAccountStatus",value:function(t){this.account_status=t}},{key:"setInitialized",value:function(t){this.initialized_broadcast=t}},{key:"cleanUp",value:function(){var t=this;this.root_store.gtm.pushDataLayer({event:"log_out"}),this.loginid=null,this.user_id=null,this.upgrade_info=void 0,this.accounts={},this.mt5_login_list=[],localStorage.setItem("active_loginid",this.loginid),localStorage.setItem("client.accounts",JSON.stringify(this.accounts)),(0,pe.runInAction)(Ae(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,de.WS.payoutCurrencies();case 3:e.t1=e.sent,e.t0.responsePayoutCurrencies.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e)})))),this.root_store.ui.removeAllNotificationMessages(!0),this.syncWithSmartTrader(this.loginid,this.accounts),this.cleanupRealityCheck()}},{key:"logout",value:(s=Ae(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,de.Y)();case 2:return 1===(e=t.sent).logout&&(this.cleanUp(),this.root_store.rudderstack.reset(),this.setLogout(!0)),t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"setLogout",value:function(t){this.has_logged_out=t,this.root_store.common.has_error&&this.root_store.common.setError(!1,null)}},{key:"storeClientAccounts",value:function(t,e){var o,r={country:"residence",landing_company_name:"landing_company_shortcode"},n={};e.forEach((function(t){Object.keys(t).forEach((function(e){if("loginid"===e)o||t.is_disabled||(t.is_virtual?t.is_virtual&&(o=t[e]):o=t[e]);else{var i=r[e]||e,c=void 0===t[e]?"":t[e];t.loginid in n||(n[t.loginid]={}),n[t.loginid][i]=c}}))}));for(var i=1;t["acct".concat(i)];){var c=t["acct".concat(i)],s=t["token".concat(i)];c&&s&&(n[c].token=s),i++}o&&n[o].token||(o=t.acct1),o&&Object.keys(n).length&&(localStorage.setItem("active_loginid",o),localStorage.setItem("client.accounts",JSON.stringify(n)),this.syncWithSmartTrader(o,this.accounts))}},{key:"setUserLogin",value:(c=Ae(regeneratorRuntime.mark((function t(e){var o,r,n,i,c,s,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o={},window.location.search&&((n=new URLSearchParams(window.location.search)).forEach((function(t,e){["acct","token","cur"].some((function(t){return(null==e?void 0:e.includes(t))&&"affiliate_token"!==e}))&&(o[e]=t)})),Object.keys(o).forEach((function(t){return n.delete(t)})),n.delete("state"),n=null===(r=n)||void 0===r?void 0:r.toString(),i=n?"?".concat(n):"/",history.replaceState(null,null,"".concat(i).concat(window.location.hash))),!(c=e?e.token1:o.token1)){t.next=16;break}return window.history.replaceState({},document.title,sessionStorage.getItem("redirect_url")),me.clear(),this.is_populating_account_list=!0,t.next=10,be().authorize(c);case 10:if(s=t.sent,e&&(o=e),!s.error){t.next=14;break}return t.abrupt("return",s);case 14:return(0,pe.runInAction)((function(){var t=(s.authorize||{}).account_list;a.upgradeable_landing_companies=Re(new Set(s.upgradeable_landing_companies)),a.canStoreClientAccounts(o,t)?a.storeClientAccounts(o,t):s.error={code:"MismatchedAcct",message:(0,he.localize)("Invalid token")}})),t.abrupt("return",s);case 16:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"canStoreClientAccounts",value:function(t,e){var o=e&&(0,_e.isEmptyObject)(this.accounts),r=Object.keys(t).filter((function(t){return/^acct./.test(t)})).every((function(o){return e.some((function(e){return e.loginid===t[o]}))}));return o&&r}},{key:"setVerificationCode",value:function(t,e){this.verification_code[e]=t,t?_e.LocalStore.set("verification_code.".concat(e),t):_e.LocalStore.remove("verification_code.".concat(e)),"signup"===e&&this.fetchResidenceList()}},{key:"setDeviceData",value:function(){(0,ke.T)("signup_device",(0,_e.isDesktopOs)()?"desktop":"mobile")}},{key:"getSignupParams",value:function(){var t={},e=new URLSearchParams(window.location.search);return["date_first_contact","signup_device","gclid_url","utm_source","utm_ad_id","utm_adgroup_id","utm_adrollclk_id","utm_campaign_id","utm_campaign","utm_fbcl_id","utm_gl_client_id","utm_msclk_id","utm_medium","utm_term","utm_content","affiliate_token"].forEach((function(o){e.get(o)&&(t[o]=e.get(o))})),t}},{key:"onSetResidence",value:function(t,e){var o=this,r=t.residence;r&&de.WS.setSettings({residence:r}).then(function(){var t=Ae(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.error){t.next=4;break}e(n.error.message),t.next=12;break;case 4:return t.next=6,o.setResidence(r);case 6:return t.next=8,de.WS.authorized.storage.landingCompany(o.accounts[o.loginid].residence).then(o.responseLandingCompany);case 8:return t.next=10,de.WS.authorized.storage.getSettings().then(function(){var t=Ae(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.setAccountSettings(e.get_settings);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 10:(0,pe.runInAction)(Ae(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,be().authorize(o.getToken()).then((function(){(0,pe.runInAction)((function(){return o.upgrade_info=o.getBasicUpgradeInfo()}))}));case 2:case"end":return t.stop()}}),t)})))),e();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"onSignup",value:function(t,e){var o=this,r=t.password,n=t.residence,i=t.email_consent;this.verification_code.signup&&r&&n&&void 0!==i&&(i=i?1:0,de.WS.newAccountVirtual(this.verification_code.signup,r,n,i,this.getSignupParams()).then(function(){var t=Ae(regeneratorRuntime.mark((function t(r){var n,i,c,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.error){t.next=4;break}e(r.error.message),t.next=11;break;case 4:return e(),n=r.new_account_virtual,i=n.client_id,c=n.currency,s=n.oauth_token,t.next=8,o.switchToNewlyCreatedAccount(i,s,c);case 8:o.root_store.gtm.pushDataLayer({event:"virtual_signup"}),o.root_store.ui.showAccountTypesModalForEuropean(),o.is_mt5_allowed&&o.root_store.ui.toggleWelcomeModal({is_visible:!0,should_persist:!0});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}},{key:"switchToNewlyCreatedAccount",value:(i=Ae(regeneratorRuntime.mark((function t(e,o,r){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={acct1:e,token1:o,curr1:r},t.next=3,this.init(n);case 3:case"end":return t.stop()}}),t,this)}))),function(t,e,o){return i.apply(this,arguments)})},{key:"fetchAccountSettings",value:function(){var t=this;return new Promise((function(e){de.WS.authorized.storage.getSettings().then((function(o){t.setAccountSettings(o.get_settings),e(o)}))}))}},{key:"fetchResidenceList",value:function(){var t=this;return new Promise((function(e){de.WS.storage.residenceList().then((function(o){t.setResidenceList(o),e(o)}))}))}},{key:"setResidenceList",value:function(t){this.residence_list=t.residence_list||[]}},{key:"fetchStatesList",value:function(){var t=this;return new Promise((function(e,o){de.WS.authorized.storage.statesList({states_list:t.accounts[t.loginid].residence}).then((function(r){r.error?o(r.error):(0,pe.runInAction)((function(){t.states_list=r.states_list||[]})),e(r)}))}))}},{key:"resetMt5ListPopulatedState",value:function(){this.is_mt5_account_list_updated=!1,this.is_populating_mt5_account_list=!0,this.mt5_login_list_error=null}},{key:"updateMt5LoginList",value:(n=Ae(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.is_logged_in||this.is_mt5_account_list_updated||this.is_populating_mt5_account_list){t.next=5;break}return t.next=3,de.WS.mt5LoginList();case 3:e=t.sent,this.responseMt5LoginList(e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"responseTradingServers",value:function(t){t.error?this.trading_servers=[]:this.trading_servers=t.trading_servers}},{key:"responseMt5LoginList",value:function(t){var e=this;this.is_populating_mt5_account_list=!1,this.is_mt5_account_list_updated=!0,this.mt5_login_list_error=null,setTimeout((function(){e.is_mt5_account_list_updated=!1}),6e4),t.error?this.mt5_login_list_error=t.error:this.mt5_login_list=t.mt5_login_list.map((function(t){var o=(t.error?t.error.details.login:t.login).replace(/^(MT[DR]?)/i,"");if(t.error){var r=t.error.details,n=r.account_type,i=r.server;return e.setMT5DisabledSignupTypes({real:"real"===n,demo:"demo"===n}),{account_type:n,display_login:o,has_error:!0,server:i}}return ze(ze({},t),{},{display_login:o})}))}},{key:"responseStatement",value:function(t){t.error||(this.statement=t.statement)}},{key:"getChangeableFields",value:function(){var t=0===Object.keys(this.account_settings).length?de.WS.authorized.storage.getSettings():this.account_settings,e=[].concat(Re(t.immutable_fields),["immutable_fields","email","password"]);return Object.keys(t).filter((function(t){return!e.includes(t)}))}},{key:"syncWithSmartTrader",value:function(t,e){var o=document.getElementById("localstorage-sync");if(o){var r=(0,_e.getUrlSmartTrader)();r&&(o.contentWindow.postMessage({key:"client.accounts",value:JSON.stringify(e)},r),o.contentWindow.postMessage({key:"active_loginid",value:t},r))}}},{key:"is_high_risk",get:function(){return!(0,_e.isEmptyObject)(this.account_status)&&"high"===this.account_status.risk_classification}},{key:"needs_financial_assessment",get:function(){return!(this.is_virtual||!this.is_financial_information_incomplete&&(this.is_svg||!this.is_financial_account&&!this.is_trading_experience_incomplete))}},{key:"has_residence",get:function(){var t;return!(null===(t=this.accounts[this.loginid])||void 0===t||!t.residence)}},{key:"setVisibilityRealityCheck",value:function(t){t&&"number"==typeof this.reality_check_timeout||(this.is_reality_check_dismissed=!t,_e.LocalStore.set("reality_check_dismissed",!t))}},{key:"clearRealityCheckTimeout",value:function(){clearTimeout(this.reality_check_timeout),this.reality_check_timeout=void 0}},{key:"setRealityCheckDuration",value:function(t){var e=this;this.reality_check_dur=+t,this.clearRealityCheckTimeout(),_e.LocalStore.set("reality_check_duration",+t),this.reality_check_timeout=setTimeout((function(){e.clearRealityCheckTimeout(),e.setVisibilityRealityCheck(1)}),60*+t*1e3)}},{key:"cleanupRealityCheck",value:function(){this.has_reality_check=!1,this.is_reality_check_dismissed=void 0,this.reality_check_dur=void 0,this.clearRealityCheckTimeout(),_e.LocalStore.remove("reality_check_duration"),_e.LocalStore.remove("reality_check_dismissed")}},{key:"fetchFinancialAssessment",value:function(){var t=this;return new Promise(function(){var e=Ae(regeneratorRuntime.mark((function e(o){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.WS.getFinancialAssessment();case 2:r=e.sent,n=r.get_financial_assessment,(0,pe.runInAction)((function(){return t.financial_assessment=n})),o(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}])&&Ee(e.prototype,o),r&&Ee(e,r),b}(we.Z),vt=Ve((mt=se).prototype,"loginid",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wt=Ve(mt.prototype,"upgrade_info",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ot=Ve(mt.prototype,"email",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kt=Ve(mt.prototype,"accounts",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),St=Ve(mt.prototype,"pre_switch_broadcast",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Pt=Ve(mt.prototype,"switched",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),jt=Ve(mt.prototype,"is_switching",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Dt=Ve(mt.prototype,"switch_broadcast",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),At=Ve(mt.prototype,"initialized_broadcast",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Rt=Ve(mt.prototype,"currencies_list",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Lt=Ve(mt.prototype,"residence_list",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),xt=Ve(mt.prototype,"states_list",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),zt=Ve(mt.prototype,"selected_currency",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ct=Ve(mt.prototype,"is_populating_account_list",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),It=Ve(mt.prototype,"is_populating_mt5_account_list",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Et=Ve(mt.prototype,"has_reality_check",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Tt=Ve(mt.prototype,"is_reality_check_dismissed",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mt=Ve(mt.prototype,"reality_check_dur",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nt=Ve(mt.prototype,"reality_check_timeout",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wt=Ve(mt.prototype,"website_status",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Ut=Ve(mt.prototype,"account_settings",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Vt=Ve(mt.prototype,"account_status",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Bt=Ve(mt.prototype,"device_data",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Ht=Ve(mt.prototype,"is_logging_in",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ft=Ve(mt.prototype,"has_logged_out",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gt=Ve(mt.prototype,"is_landing_company_loaded",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qt=Ve(mt.prototype,"is_account_setting_loaded",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Jt=Ve(mt.prototype,"landing_companies",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Zt=Ve(mt.prototype,"upgradeable_landing_companies",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$t=Ve(mt.prototype,"mt5_disabled_signup_types",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{real:!1,demo:!1}}}),Yt=Ve(mt.prototype,"mt5_login_list",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Kt=Ve(mt.prototype,"mt5_login_list_error",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xt=Ve(mt.prototype,"statement",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Qt=Ve(mt.prototype,"obj_total_balance",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{amount_real:void 0,amount_mt5:void 0,currency:""}}}),te=Ve(mt.prototype,"verification_code",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{signup:"",reset_password:"",payment_withdraw:"",payment_agent_withdraw:"",trading_platform_password_reset:""}}}),ee=Ve(mt.prototype,"account_limits",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),oe=Ve(mt.prototype,"self_exclusion",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),re=Ve(mt.prototype,"local_currency_config",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{currency:"",decimal_places:void 0}}}),ne=Ve(mt.prototype,"has_cookie_account",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ie=Ve(mt.prototype,"financial_assessment",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=Ve(mt.prototype,"trading_servers",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ve(mt.prototype,"balance",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"balance"),mt.prototype),Ve(mt.prototype,"is_reality_check_visible",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_reality_check_visible"),mt.prototype),Ve(mt.prototype,"is_svg",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_svg"),mt.prototype),Ve(mt.prototype,"reality_check_duration",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"reality_check_duration"),mt.prototype),Ve(mt.prototype,"reality_check_dismissed",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"reality_check_dismissed"),mt.prototype),Ve(mt.prototype,"has_active_real_account",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"has_active_real_account"),mt.prototype),Ve(mt.prototype,"has_maltainvest_account",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"has_maltainvest_account"),mt.prototype),Ve(mt.prototype,"has_malta_account",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"has_malta_account"),mt.prototype),Ve(mt.prototype,"has_any_real_account",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"has_any_real_account"),mt.prototype),Ve(mt.prototype,"first_switchable_real_loginid",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"first_switchable_real_loginid"),mt.prototype),Ve(mt.prototype,"can_change_fiat_currency",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"can_change_fiat_currency"),mt.prototype),Ve(mt.prototype,"legal_allowed_currencies",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"legal_allowed_currencies"),mt.prototype),Ve(mt.prototype,"upgradeable_currencies",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"upgradeable_currencies"),mt.prototype),Ve(mt.prototype,"current_currency_type",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"current_currency_type"),mt.prototype),Ve(mt.prototype,"available_crypto_currencies",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"available_crypto_currencies"),mt.prototype),Ve(mt.prototype,"has_iom_account",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"has_iom_account"),mt.prototype),Ve(mt.prototype,"has_fiat",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"has_fiat"),mt.prototype),Ve(mt.prototype,"current_fiat_currency",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"current_fiat_currency"),mt.prototype),Ve(mt.prototype,"current_landing_company",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"current_landing_company"),mt.prototype),Ve(mt.prototype,"account_list",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"account_list"),mt.prototype),Ve(mt.prototype,"has_mt5_login",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"has_mt5_login"),mt.prototype),Ve(mt.prototype,"has_account_error_in_mt5_list",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"has_account_error_in_mt5_list"),mt.prototype),Ve(mt.prototype,"can_have_more_real_synthetic_mt5",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"can_have_more_real_synthetic_mt5"),mt.prototype),Ve(mt.prototype,"active_accounts",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"active_accounts"),mt.prototype),Ve(mt.prototype,"all_loginids",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"all_loginids"),mt.prototype),Ve(mt.prototype,"account_title",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"account_title"),mt.prototype),Ve(mt.prototype,"currency",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"currency"),mt.prototype),Ve(mt.prototype,"default_currency",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"default_currency"),mt.prototype),Ve(mt.prototype,"should_allow_authentication",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"should_allow_authentication"),mt.prototype),Ve(mt.prototype,"is_authentication_needed",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_authentication_needed"),mt.prototype),Ve(mt.prototype,"is_tnc_needed",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_tnc_needed"),mt.prototype),Ve(mt.prototype,"is_social_signup",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_social_signup"),mt.prototype),Ve(mt.prototype,"is_trading_password_required",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_trading_password_required"),mt.prototype),Ve(mt.prototype,"is_financial_information_incomplete",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_financial_information_incomplete"),mt.prototype),Ve(mt.prototype,"is_withdrawal_lock",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_withdrawal_lock"),mt.prototype),Ve(mt.prototype,"is_trading_experience_incomplete",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_trading_experience_incomplete"),mt.prototype),Ve(mt.prototype,"authentication_status",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"authentication_status"),mt.prototype),Ve(mt.prototype,"social_identity_provider",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"social_identity_provider"),mt.prototype),Ve(mt.prototype,"is_fully_authenticated",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_fully_authenticated"),mt.prototype),Ve(mt.prototype,"is_pending_authentication",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_pending_authentication"),mt.prototype),Ve(mt.prototype,"is_financial_account",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_financial_account"),mt.prototype),Ve(mt.prototype,"is_age_verified",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_age_verified"),mt.prototype),Ve(mt.prototype,"landing_company_shortcode",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"landing_company_shortcode"),mt.prototype),Ve(mt.prototype,"landing_company",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"landing_company"),mt.prototype),Ve(mt.prototype,"is_valid_login",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_valid_login"),mt.prototype),Ve(mt.prototype,"is_logged_in",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_logged_in"),mt.prototype),Ve(mt.prototype,"is_virtual",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_virtual"),mt.prototype),Ve(mt.prototype,"is_eu",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_eu"),mt.prototype),Ve(mt.prototype,"is_uk",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_uk"),mt.prototype),Ve(mt.prototype,"should_have_real_account",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"should_have_real_account"),mt.prototype),Ve(mt.prototype,"standpoint",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"standpoint"),mt.prototype),Ve(mt.prototype,"can_upgrade",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"can_upgrade"),mt.prototype),Ve(mt.prototype,"can_upgrade_to",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"can_upgrade_to"),mt.prototype),Ve(mt.prototype,"virtual_account_loginid",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"virtual_account_loginid"),mt.prototype),Ve(mt.prototype,"is_single_currency",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_single_currency"),mt.prototype),Ve(mt.prototype,"account_type",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"account_type"),mt.prototype),Ve(mt.prototype,"is_mt5_allowed",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_mt5_allowed"),mt.prototype),Ve(mt.prototype,"clients_country",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"clients_country"),mt.prototype),Ve(mt.prototype,"is_eu_country",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_eu_country"),mt.prototype),Ve(mt.prototype,"is_synthetics_unavailable",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_synthetics_unavailable"),mt.prototype),Ve(mt.prototype,"is_options_blocked",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_options_blocked"),mt.prototype),Ve(mt.prototype,"resetLocalStorageValues",[r],Object.getOwnPropertyDescriptor(mt.prototype,"resetLocalStorageValues"),mt.prototype),Ve(mt.prototype,"getBasicUpgradeInfo",[n],Object.getOwnPropertyDescriptor(mt.prototype,"getBasicUpgradeInfo"),mt.prototype),Ve(mt.prototype,"setMT5DisabledSignupTypes",[i],Object.getOwnPropertyDescriptor(mt.prototype,"setMT5DisabledSignupTypes"),mt.prototype),Ve(mt.prototype,"getLimits",[c],Object.getOwnPropertyDescriptor(mt.prototype,"getLimits"),mt.prototype),Ve(mt.prototype,"setCookieAccount",[s],Object.getOwnPropertyDescriptor(mt.prototype,"setCookieAccount"),mt.prototype),Ve(mt.prototype,"updateSelfExclusion",[a],Object.getOwnPropertyDescriptor(mt.prototype,"updateSelfExclusion"),mt.prototype),Ve(mt.prototype,"responsePayoutCurrencies",[u],Object.getOwnPropertyDescriptor(mt.prototype,"responsePayoutCurrencies"),mt.prototype),Ve(mt.prototype,"responseAuthorize",[p],Object.getOwnPropertyDescriptor(mt.prototype,"responseAuthorize"),mt.prototype),Ve(mt.prototype,"setWebsiteStatus",[l],Object.getOwnPropertyDescriptor(mt.prototype,"setWebsiteStatus"),mt.prototype),Ve(mt.prototype,"accountRealReaction",[y],Object.getOwnPropertyDescriptor(mt.prototype,"accountRealReaction"),mt.prototype),Ve(mt.prototype,"setLoginInformation",[_],Object.getOwnPropertyDescriptor(mt.prototype,"setLoginInformation"),mt.prototype),Ve(mt.prototype,"realAccountSignup",[h],Object.getOwnPropertyDescriptor(mt.prototype,"realAccountSignup"),mt.prototype),Ve(mt.prototype,"setAccountCurrency",[d],Object.getOwnPropertyDescriptor(mt.prototype,"setAccountCurrency"),mt.prototype),Ve(mt.prototype,"updateAccountCurrency",[g],Object.getOwnPropertyDescriptor(mt.prototype,"updateAccountCurrency"),mt.prototype),Ve(mt.prototype,"createCryptoAccount",[f],Object.getOwnPropertyDescriptor(mt.prototype,"createCryptoAccount"),mt.prototype),Ve(mt.prototype,"residence",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"residence"),mt.prototype),Ve(mt.prototype,"email_address",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"email_address"),mt.prototype),Ve(mt.prototype,"is_website_status_ready",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_website_status_ready"),mt.prototype),Ve(mt.prototype,"updateAccountList",[b],Object.getOwnPropertyDescriptor(mt.prototype,"updateAccountList"),mt.prototype),Ve(mt.prototype,"switchAccount",[m],Object.getOwnPropertyDescriptor(mt.prototype,"switchAccount"),mt.prototype),Ve(mt.prototype,"resetVirtualBalance",[v],Object.getOwnPropertyDescriptor(mt.prototype,"resetVirtualBalance"),mt.prototype),Ve(mt.prototype,"switchEndSignal",[w],Object.getOwnPropertyDescriptor(mt.prototype,"switchEndSignal"),mt.prototype),Ve(mt.prototype,"refreshNotifications",[O],Object.getOwnPropertyDescriptor(mt.prototype,"refreshNotifications"),mt.prototype),Ve(mt.prototype,"init",[k],Object.getOwnPropertyDescriptor(mt.prototype,"init"),mt.prototype),Ve(mt.prototype,"resetMt5AccountListPopulation",[S],Object.getOwnPropertyDescriptor(mt.prototype,"resetMt5AccountListPopulation"),mt.prototype),Ve(mt.prototype,"responseWebsiteStatus",[P],Object.getOwnPropertyDescriptor(mt.prototype,"responseWebsiteStatus"),mt.prototype),Ve(mt.prototype,"responseLandingCompany",[j],Object.getOwnPropertyDescriptor(mt.prototype,"responseLandingCompany"),mt.prototype),Ve(mt.prototype,"setRealityCheck",[D],Object.getOwnPropertyDescriptor(mt.prototype,"setRealityCheck"),mt.prototype),Ve(mt.prototype,"setLoginId",[A],Object.getOwnPropertyDescriptor(mt.prototype,"setLoginId"),mt.prototype),Ve(mt.prototype,"setAccounts",[R],Object.getOwnPropertyDescriptor(mt.prototype,"setAccounts"),mt.prototype),Ve(mt.prototype,"setSwitched",[L],Object.getOwnPropertyDescriptor(mt.prototype,"setSwitched"),mt.prototype),Ve(mt.prototype,"setHasMissingRequiredField",[x],Object.getOwnPropertyDescriptor(mt.prototype,"setHasMissingRequiredField"),mt.prototype),Ve(mt.prototype,"setIsLoggingIn",[z],Object.getOwnPropertyDescriptor(mt.prototype,"setIsLoggingIn"),mt.prototype),Ve(mt.prototype,"setPreSwitchAccount",[C],Object.getOwnPropertyDescriptor(mt.prototype,"setPreSwitchAccount"),mt.prototype),Ve(mt.prototype,"broadcastAccountChange",[I],Object.getOwnPropertyDescriptor(mt.prototype,"broadcastAccountChange"),mt.prototype),Ve(mt.prototype,"switchAccountHandler",[E],Object.getOwnPropertyDescriptor(mt.prototype,"switchAccountHandler"),mt.prototype),Ve(mt.prototype,"registerReactions",[T],Object.getOwnPropertyDescriptor(mt.prototype,"registerReactions"),mt.prototype),Ve(mt.prototype,"resetVirtualBalanceNotification",[M],Object.getOwnPropertyDescriptor(mt.prototype,"resetVirtualBalanceNotification"),mt.prototype),Ve(mt.prototype,"setBalanceActiveAccount",[N],Object.getOwnPropertyDescriptor(mt.prototype,"setBalanceActiveAccount"),mt.prototype),Ve(mt.prototype,"setBalanceOtherAccounts",[W],Object.getOwnPropertyDescriptor(mt.prototype,"setBalanceOtherAccounts"),mt.prototype),Ve(mt.prototype,"selectCurrency",[U],Object.getOwnPropertyDescriptor(mt.prototype,"selectCurrency"),mt.prototype),Ve(mt.prototype,"setResidence",[V],Object.getOwnPropertyDescriptor(mt.prototype,"setResidence"),mt.prototype),Ve(mt.prototype,"setEmail",[B],Object.getOwnPropertyDescriptor(mt.prototype,"setEmail"),mt.prototype),Ve(mt.prototype,"setAccountSettings",[H],Object.getOwnPropertyDescriptor(mt.prototype,"setAccountSettings"),mt.prototype),Ve(mt.prototype,"setAccountStatus",[F],Object.getOwnPropertyDescriptor(mt.prototype,"setAccountStatus"),mt.prototype),Ve(mt.prototype,"setInitialized",[G],Object.getOwnPropertyDescriptor(mt.prototype,"setInitialized"),mt.prototype),Ve(mt.prototype,"cleanUp",[q],Object.getOwnPropertyDescriptor(mt.prototype,"cleanUp"),mt.prototype),Ve(mt.prototype,"logout",[J],Object.getOwnPropertyDescriptor(mt.prototype,"logout"),mt.prototype),Ve(mt.prototype,"setLogout",[Z],Object.getOwnPropertyDescriptor(mt.prototype,"setLogout"),mt.prototype),Ve(mt.prototype,"storeClientAccounts",[$],Object.getOwnPropertyDescriptor(mt.prototype,"storeClientAccounts"),mt.prototype),Ve(mt.prototype,"setUserLogin",[Y],Object.getOwnPropertyDescriptor(mt.prototype,"setUserLogin"),mt.prototype),Ve(mt.prototype,"canStoreClientAccounts",[K],Object.getOwnPropertyDescriptor(mt.prototype,"canStoreClientAccounts"),mt.prototype),Ve(mt.prototype,"setVerificationCode",[X],Object.getOwnPropertyDescriptor(mt.prototype,"setVerificationCode"),mt.prototype),Ve(mt.prototype,"setDeviceData",[Q],Object.getOwnPropertyDescriptor(mt.prototype,"setDeviceData"),mt.prototype),Ve(mt.prototype,"getSignupParams",[tt],Object.getOwnPropertyDescriptor(mt.prototype,"getSignupParams"),mt.prototype),Ve(mt.prototype,"onSetResidence",[et],Object.getOwnPropertyDescriptor(mt.prototype,"onSetResidence"),mt.prototype),Ve(mt.prototype,"onSignup",[ot],Object.getOwnPropertyDescriptor(mt.prototype,"onSignup"),mt.prototype),Ve(mt.prototype,"fetchAccountSettings",[rt],Object.getOwnPropertyDescriptor(mt.prototype,"fetchAccountSettings"),mt.prototype),Ve(mt.prototype,"fetchResidenceList",[nt],Object.getOwnPropertyDescriptor(mt.prototype,"fetchResidenceList"),mt.prototype),Ve(mt.prototype,"setResidenceList",[it],Object.getOwnPropertyDescriptor(mt.prototype,"setResidenceList"),mt.prototype),Ve(mt.prototype,"fetchStatesList",[ct],Object.getOwnPropertyDescriptor(mt.prototype,"fetchStatesList"),mt.prototype),Ve(mt.prototype,"resetMt5ListPopulatedState",[st],Object.getOwnPropertyDescriptor(mt.prototype,"resetMt5ListPopulatedState"),mt.prototype),Ve(mt.prototype,"updateMt5LoginList",[at],Object.getOwnPropertyDescriptor(mt.prototype,"updateMt5LoginList"),mt.prototype),Ve(mt.prototype,"responseTradingServers",[ut],Object.getOwnPropertyDescriptor(mt.prototype,"responseTradingServers"),mt.prototype),Ve(mt.prototype,"responseMt5LoginList",[pt],Object.getOwnPropertyDescriptor(mt.prototype,"responseMt5LoginList"),mt.prototype),Ve(mt.prototype,"responseStatement",[lt],Object.getOwnPropertyDescriptor(mt.prototype,"responseStatement"),mt.prototype),Ve(mt.prototype,"getChangeableFields",[yt],Object.getOwnPropertyDescriptor(mt.prototype,"getChangeableFields"),mt.prototype),Ve(mt.prototype,"syncWithSmartTrader",[_t],Object.getOwnPropertyDescriptor(mt.prototype,"syncWithSmartTrader"),mt.prototype),Ve(mt.prototype,"is_high_risk",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"is_high_risk"),mt.prototype),Ve(mt.prototype,"needs_financial_assessment",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"needs_financial_assessment"),mt.prototype),Ve(mt.prototype,"has_residence",[pe.computed],Object.getOwnPropertyDescriptor(mt.prototype,"has_residence"),mt.prototype),Ve(mt.prototype,"setVisibilityRealityCheck",[ht],Object.getOwnPropertyDescriptor(mt.prototype,"setVisibilityRealityCheck"),mt.prototype),Ve(mt.prototype,"clearRealityCheckTimeout",[dt],Object.getOwnPropertyDescriptor(mt.prototype,"clearRealityCheckTimeout"),mt.prototype),Ve(mt.prototype,"setRealityCheckDuration",[gt],Object.getOwnPropertyDescriptor(mt.prototype,"setRealityCheckDuration"),mt.prototype),Ve(mt.prototype,"cleanupRealityCheck",[ft],Object.getOwnPropertyDescriptor(mt.prototype,"cleanupRealityCheck"),mt.prototype),Ve(mt.prototype,"fetchFinancialAssessment",[bt],Object.getOwnPropertyDescriptor(mt.prototype,"fetchFinancialAssessment"),mt.prototype),mt),So=o(81250),Po=o.n(So),jo=o(40041);function Do(t){return(Do="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ao(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function Ro(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Ao(Object(o),!0).forEach((function(e){Lo(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):Ao(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function Lo(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function xo(t,e,o,r){o&&Object.defineProperty(t,e,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}function zo(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Co(t,e){return(Co=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Io(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,r=Mo(t);if(e){var n=Mo(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return Eo(this,o)}}function Eo(t,e){return!e||"object"!==Do(e)&&"function"!=typeof e?To(t):e}function To(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mo(t){return(Mo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function No(t,e,o,r,n){var i={};return Object.keys(r).forEach((function(t){i[t]=r[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=o.slice().reverse().reduce((function(o,r){return r(t,e,o)||o}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var Wo,Uo,Vo,Bo,Ho,Fo,Go=(Be=pe.action.bound,He=pe.action.bound,Fe=pe.action.bound,Ge=pe.action.bound,qe=pe.action.bound,Je=pe.action.bound,Ze=pe.action.bound,$e=pe.action.bound,Ye=pe.action.bound,Ke=pe.action.bound,Xe=pe.action.bound,Qe=pe.action.bound,to=pe.action.bound,eo=pe.action.bound,mo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Co(t,e)}(i,t);var e,o,r,n=Io(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),xo(e=n.call(this,{root_store:t}),"server_time",ro,To(e)),xo(e,"current_language",no,To(e)),xo(e,"allowed_languages",io,To(e)),xo(e,"has_error",co,To(e)),xo(e,"error",so,To(e)),xo(e,"network_status",ao,To(e)),xo(e,"is_network_online",uo,To(e)),xo(e,"is_socket_opened",po,To(e)),xo(e,"was_socket_opened",lo,To(e)),xo(e,"services_error",yo,To(e)),xo(e,"deposit_url",_o,To(e)),xo(e,"withdraw_url",ho,To(e)),xo(e,"app_routing_history",go,To(e)),xo(e,"app_router",fo,To(e)),xo(e,"app_id",bo,To(e)),(0,pe.reaction)((function(){return e.app_routing_history.map((function(t){return t.pathname}))}),(function(){e.root_store.ui.filterNotificationMessages()})),e}return e=i,(o=[{key:"checkAppId",value:function(){this.app_id&&this.app_id!==(0,_e.getAppId)()&&be().closeAndOpenNewConnection(),this.app_id=(0,_e.getAppId)()}},{key:"setInitialRouteHistoryItem",value:function(t){if(-1!==window.location.href.indexOf("?ext_platform_url=")){var e=decodeURI(new URL(window.location.href).searchParams.get("ext_platform_url"));0===(null==e?void 0:e.indexOf((0,_e.getUrlSmartTrader)()))?this.addRouteHistoryItem({pathname:e,action:"PUSH",is_external:!0}):0===(null==e?void 0:e.indexOf(_e.routes.cashier_p2p))?this.addRouteHistoryItem({pathname:e,action:"PUSH"}):this.addRouteHistoryItem(Ro(Ro({},t),{},{action:"PUSH"})),window.history.replaceState({},document.title,window.location.pathname)}else this.addRouteHistoryItem(Ro(Ro({},t),{},{action:"PUSH"}))}},{key:"setServerTime",value:function(t){this.server_time=t}},{key:"setIsSocketOpened",value:function(t){var e=this.was_socket_opened&&t;this.is_socket_opened=t,this.was_socket_opened=this.was_socket_opened||t,e&&this.root_store.client.broadcastAccountChangeAfterAuthorize()}},{key:"setNetworkStatus",value:function(t,e){this.network_status.class?(this.network_status.class=t.class,this.network_status.tooltip=t.tooltip):this.network_status=t,this.is_network_online=e;var o=this.root_store.ui;e?o.removeNotificationMessage((0,Se.G$)().you_are_offline):o.addNotificationMessage((0,Se.G$)().you_are_offline)}},{key:"setError",value:function(t,e){this.has_error=t,this.error=Ro({type:e?e.type:"info"},e&&{header:e.header,message:e.message,redirect_label:e.redirect_label,redirectOnClick:e.redirectOnClick,should_show_refresh:e.should_show_refresh,redirect_to:e.redirect_to,should_clear_error_on_click:e.should_clear_error_on_click,setError:this.setError})}},{key:"showError",value:function(t){var e=t.message,o=t.header,r=t.redirect_label,n=t.redirectOnClick,i=t.should_show_refresh,c=t.redirect_to,s=t.should_clear_error_on_click;this.setError(!0,{header:o,message:e,redirect_label:r,redirectOnClick:n,should_show_refresh:i,redirect_to:c,should_clear_error_on_click:s,type:"error"})}},{key:"setDepositURL",value:function(t){this.deposit_url=t}},{key:"setWithdrawURL",value:function(t){this.withdraw_url=t}},{key:"setServicesError",value:function(t){(0,_e.isMobile)()?this.root_store.ui.addToast({content:t.message,type:"error"}):(this.services_error=t,this.root_store.ui.toggleServicesErrorModal(!0))}},{key:"setAppRouterHistory",value:function(t){this.app_router.history=t}},{key:"routeTo",value:function(t){this.app_router.history&&this.app_router.history.push(t)}},{key:"addRouteHistoryItem",value:function(t){var e=this.app_routing_history.findIndex((function(e){return e.pathname===t.pathname&&"PUSH"===e.action}));e>-1&&this.app_routing_history.splice(e,1),this.app_routing_history.unshift(t)}},{key:"routeBackInApp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=-1,r=this.app_routing_history.find((function(t,r){if("PUSH"===t.action){if(t.is_external)return!0;var n=t.pathname.split("/")[1];if([_e.routes.mt5,_e.routes.bot,_e.routes.trade].map((function(t){return t.split("/")[1]})).includes(n)||e.includes(t.pathname))return o=r,!0}return!1}));if(r){if(r.is_external)return void(window.location.href=r.pathname);if(o>-1){this.app_routing_history.splice(0,o+1);var n=this.root_store.ui;return void(r.pathname===_e.routes.cashier_p2p&&n.is_mobile?t.push("".concat(r.pathname,"/verification")):t.push(r.pathname))}}t.push(_e.routes.trade)}}])&&zo(e.prototype,o),r&&zo(e,r),i}(we.Z),ro=No((oo=mo).prototype,"server_time",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Po().get()||(0,_e.toMoment)()}}),no=No(oo.prototype,"current_language",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return jo.XX}}),io=No(oo.prototype,"allowed_languages",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object.keys((0,jo.$v)())}}),co=No(oo.prototype,"has_error",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),so=No(oo.prototype,"error",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{type:"info",message:""}}}),ao=No(oo.prototype,"network_status",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),uo=No(oo.prototype,"is_network_online",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),po=No(oo.prototype,"is_socket_opened",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),lo=No(oo.prototype,"was_socket_opened",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),yo=No(oo.prototype,"services_error",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),_o=No(oo.prototype,"deposit_url",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ho=No(oo.prototype,"withdraw_url",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),go=No(oo.prototype,"app_routing_history",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),fo=No(oo.prototype,"app_router",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{history:null}}}),bo=No(oo.prototype,"app_id",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),No(oo.prototype,"checkAppId",[Be],Object.getOwnPropertyDescriptor(oo.prototype,"checkAppId"),oo.prototype),No(oo.prototype,"setInitialRouteHistoryItem",[He],Object.getOwnPropertyDescriptor(oo.prototype,"setInitialRouteHistoryItem"),oo.prototype),No(oo.prototype,"setServerTime",[Fe],Object.getOwnPropertyDescriptor(oo.prototype,"setServerTime"),oo.prototype),No(oo.prototype,"setIsSocketOpened",[Ge],Object.getOwnPropertyDescriptor(oo.prototype,"setIsSocketOpened"),oo.prototype),No(oo.prototype,"setNetworkStatus",[qe],Object.getOwnPropertyDescriptor(oo.prototype,"setNetworkStatus"),oo.prototype),No(oo.prototype,"setError",[Je],Object.getOwnPropertyDescriptor(oo.prototype,"setError"),oo.prototype),No(oo.prototype,"showError",[Ze],Object.getOwnPropertyDescriptor(oo.prototype,"showError"),oo.prototype),No(oo.prototype,"setDepositURL",[$e],Object.getOwnPropertyDescriptor(oo.prototype,"setDepositURL"),oo.prototype),No(oo.prototype,"setWithdrawURL",[Ye],Object.getOwnPropertyDescriptor(oo.prototype,"setWithdrawURL"),oo.prototype),No(oo.prototype,"setServicesError",[Ke],Object.getOwnPropertyDescriptor(oo.prototype,"setServicesError"),oo.prototype),No(oo.prototype,"setAppRouterHistory",[Xe],Object.getOwnPropertyDescriptor(oo.prototype,"setAppRouterHistory"),oo.prototype),No(oo.prototype,"routeTo",[Qe],Object.getOwnPropertyDescriptor(oo.prototype,"routeTo"),oo.prototype),No(oo.prototype,"addRouteHistoryItem",[to],Object.getOwnPropertyDescriptor(oo.prototype,"addRouteHistoryItem"),oo.prototype),No(oo.prototype,"routeBackInApp",[eo],Object.getOwnPropertyDescriptor(oo.prototype,"routeBackInApp"),oo.prototype),oo);function qo(t){return(qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jo(t,e,o,r,n,i,c){try{var s=t[i](c),a=s.value}catch(t){return void o(t)}s.done?e(a):Promise.resolve(a).then(r,n)}function Zo(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function $o(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Zo(Object(o),!0).forEach((function(e){Yo(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):Zo(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function Yo(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function Ko(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xo(t,e){return(Xo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,r=er(t);if(e){var n=er(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return tr(this,o)}}function tr(t,e){return!e||"object"!==qo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function er(t){return(er=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function or(t,e,o,r,n){var i={};return Object.keys(r).forEach((function(t){i[t]=r[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=o.slice().reverse().reduce((function(o,r){return r(t,e,o)||o}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var rr=(Wo=pe.action.bound,Uo=pe.action.bound,Vo=pe.action.bound,Bo=pe.action.bound,Ho=pe.action.bound,or((Fo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xo(t,e)}(s,t);var e,o,r,n,i,c=Qo(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=c.call(this,{root_store:t})).is_gtm_applicable="deriv-app.binary.sx"===window.location.hostname||/^(16303|16929|19111|19112)$/.test((0,_e.getAppId)()),e.onSwitchAccount(e.accountSwitcherListener),e}return e=s,(o=[{key:"visitorId",get:function(){return this.root_store.client.loginid}},{key:"common_variables",get:function(){var t,e,o;return $o($o({language:(0,he.getLanguage)()},this.root_store.client.is_logged_in&&{visitorId:this.visitorId,currency:this.root_store.client.currency,userId:this.root_store.client.user_id,email:this.root_store.client.email}),{},{loggedIn:this.root_store.client.is_logged_in,theme:this.root_store.ui.is_dark_mode_on?"dark":"light",platform:(t=new URL(window.location.href),e=t.hostname,o=t.pathname,/^(deriv-app\.binary.sx|app.deriv.com|staging-app.deriv.com|deriv.app|staging.deriv.app|localhost.binary.sx)$/.test(e)?"bot"===o?"DBot":"mt5"===o?"MT5":"DTrader":"undefined")})}},{key:"accountSwitcherListener",value:function(){var t=this;return new Promise((function(e){return e(t.pushDataLayer({event:"account switch"}))}))}},{key:"pushDataLayer",value:(n=regeneratorRuntime.mark((function t(e){var o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.is_gtm_applicable&&be().wait("authorize").then((function(){var t=$o($o({},o.common_variables),e);t.event&&dataLayer.push(t)}));case 1:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(o,r){var i=n.apply(t,e);function c(t){Jo(i,o,r,c,s,"next",t)}function s(t){Jo(i,o,r,c,s,"throw",t)}c(void 0)}))},function(t){return i.apply(this,arguments)})},{key:"pushTransactionData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.is_gtm_applicable&&!this.root_store.client.is_virtual&&t.transaction&&t.transaction.action&&["deposit","withdrawal"].includes(t.transaction.action)){var o=(0,_e.toMoment)(),r="GTM_transactions",n=JSON.parse(localStorage.getItem(r))||{};Object.prototype.hasOwnProperty.call(n,"timestamp")&&o.isAfter((0,_e.epochToMoment)(n.timestamp),"day")&&(localStorage.removeItem(r),n={timestamp:o.unix()});var i=n.transactions||[];if(!i.includes(t.transaction.transaction_id)){var c={event:"transaction",bom_account_type:this.root_store.client.account_type,bom_today:o.unix(),transaction:{id:t.transaction.transaction_id,type:t.transaction.action,time:t.transaction.transaction_time,amount:t.transaction.amount}};Object.assign(c,e),this.pushDataLayer(c),i.push(t.transaction.transaction_id),n.transactions=i,n.timestamp=n.timestamp||o.unix(),localStorage.setItem(r,JSON.stringify(n))}}}},{key:"eventHandler",value:function(t){if(this.is_gtm_applicable){var e=localStorage.getItem("GTM_login"),o="1"===localStorage.getItem("GTM_new_account");localStorage.removeItem("GTM_login"),localStorage.removeItem("GTM_new_account");var r=ae.getJSON("affiliate_tracking");r&&this.pushDataLayer({affiliate_token:r});var n=(0,_e.toMoment)(),i={visitorId:this.visitorId,account_type:this.root_store.client.account_type,currency:this.root_store.client.currency,country:t.country,country_abbrev:t.country_code,email:t.email,url:window.location.href,today:n.unix()};o&&(i.event="new_account",i.bom_date_joined=i.bom_today),e&&(i.event=e),this.pushDataLayer(i)}}},{key:"setLoginFlag",value:function(t){this.is_gtm_applicable&&t&&localStorage.setItem("GTM_login",t)}}])&&Ko(e.prototype,o),r&&Ko(e,r),s}(we.Z)).prototype,"visitorId",[pe.computed],Object.getOwnPropertyDescriptor(Fo.prototype,"visitorId"),Fo.prototype),or(Fo.prototype,"common_variables",[pe.computed],Object.getOwnPropertyDescriptor(Fo.prototype,"common_variables"),Fo.prototype),or(Fo.prototype,"accountSwitcherListener",[Wo],Object.getOwnPropertyDescriptor(Fo.prototype,"accountSwitcherListener"),Fo.prototype),or(Fo.prototype,"pushDataLayer",[Uo],Object.getOwnPropertyDescriptor(Fo.prototype,"pushDataLayer"),Fo.prototype),or(Fo.prototype,"pushTransactionData",[Vo],Object.getOwnPropertyDescriptor(Fo.prototype,"pushTransactionData"),Fo.prototype),or(Fo.prototype,"eventHandler",[Bo],Object.getOwnPropertyDescriptor(Fo.prototype,"eventHandler"),Fo.prototype),or(Fo.prototype,"setLoginFlag",[Ho],Object.getOwnPropertyDescriptor(Fo.prototype,"setLoginFlag"),Fo.prototype),Fo),nr=o(33727),ir=o(23088),cr=o(47997),sr=o(94271),ar=o(56139);var ur=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.client=new ko(this),this.common=new Go(this),this.modules=new cr.Z(this),this.ui=new ar.Z(this),this.gtm=new rr(this),this.rudderstack=new nr.Z(this),this.menu=new sr.Z(this),this.pushwoosh=new ir.Z(this)}}}]);